<!DOCTYPE html>
<!--
================================================================================
COMMAND CENTER V2.0 - PRODUCTION READY
================================================================================
Job Search Management System | Dec 12, 2025 - Feb 9, 2026

GitHub Pages: https://[your-username].github.io/command-center/

âœ¨ V2 FEATURES:
â€¢ Holographic gradient background (royal blue â†’ purple â†’ cyan â†’ gold)
â€¢ Daily Wins Journal (track progress & stay motivated)
â€¢ Mobile-optimized Kanban (tap buttons, intuitive UX)
â€¢ Auto-sync (loads on open, saves automatically to Google Sheets)
â€¢ Claude AI assistant (desktop iframe, mobile opens new tab)
â€¢ 7 focused tabs (no podcasts distraction)
â€¢ Adjusted for 2PM Dec 12 start

ðŸ“‹ SETUP REQUIRED:
1. Deploy to GitHub Pages (see QUICK_START_GITHUB.txt)
2. Add yourself as OAuth test user (see FIX_403_ERROR.txt)
3. Configure credentials below at STEP 5
4. Open your GitHub Pages URL
5. Click "Sync" to authorize
6. Done! Auto-syncs from then on.

ðŸ” STEP 5: ADD YOUR CREDENTIALS HERE â¬‡ï¸
Search for "STEP 5" in this file (around line 1450)

================================================================================
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Center</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000;
            color: #ffffff;
            min-height: 100vh;
            padding: 32px;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Background layer - NO BLUR, stays sharp! */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(6, 182, 212, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 100%, rgba(245, 158, 11, 0.15) 0%, transparent 50%),
                linear-gradient(135deg, 
                    #1e3a8a 0%, 
                    #1e40af 15%,
                    #5b21b6 35%,
                    #6366f1 50%,
                    #8b5cf6 65%,
                    #06b6d4 85%,
                    #1e3a8a 100%
                );
            background-size: 100% 100%, 100% 100%, 100% 100%, 400% 400%;
            animation: holoShift 20s ease-in-out infinite fixed no-repeat;
            z-index: -2;
        }
        
        /* Dark overlay - subtle, keeps stars visible */
        body::after {
            content: '';
            position: fixed;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 60px,
                    rgba(255, 255, 255, 0.03) 60px,
                    rgba(255, 255, 255, 0.03) 80px
                ),
                linear-gradient(90deg, 
                    transparent 30%, 
                    rgba(139, 92, 246, 0.05) 50%, 
                    transparent 70%
                );
            animation: shimmer 12s linear infinite;
            pointer-events: none;
            z-index: -1;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        /* DEPTH LAYER 1: Header - 40px blur */
        header {
            background: rgba(20, 25, 35, 0.65);
            backdrop-filter: blur(40px) saturate(120%);
            -webkit-backdrop-filter: blur(40px) saturate(120%);
            padding: 32px 40px;
            border-radius: 16px;
            margin-bottom: 20px;
            border: 1px solid rgba(100, 150, 255, 0.15);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            animation: slideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        
        @keyframes holoShift {
            0%, 100% { 
                background-position: 0% 0%, 0% 0%, 0% 0%, 0% 50%; 
                filter: hue-rotate(0deg) saturate(1.2);
            }
        
        @keyframes shimmer {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50%, 50%); }
        }
            25% { 
                background-position: 20% 10%, 80% 90%, 50% 100%, 25% 50%; 
                filter: hue-rotate(8deg) saturate(1.3);
            }
            50% { 
                background-position: 40% 20%, 60% 80%, 40% 90%, 50% 50%; 
                filter: hue-rotate(15deg) saturate(1.4);
            }
            75% { 
                background-position: 20% 30%, 80% 70%, 60% 100%, 75% 50%; 
                filter: hue-rotate(8deg) saturate(1.3);
            }
        }
        
        @keyframes slideDown {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        h1 { 
            font-size: 2.5em; 
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        h1 i {
            color: #3b82f6;
        }
        
        .subtitle { 
            font-size: 0.95em; 
            color: rgba(255, 255, 255, 0.6);
            font-weight: 400;
        }
        
        .sync-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            background: rgba(59, 130, 246, 0.15);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 20px;
            font-size: 0.75em;
            margin-left: 12px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            font-weight: 600;
        }
        
        .sync-status.synced { 
            background: rgba(34, 197, 94, 0.15); 
            border-color: rgba(34, 197, 94, 0.3); 
            color: #86efac; 
        }
        
        .sync-status.syncing { 
            background: rgba(245, 158, 11, 0.15); 
            border-color: rgba(245, 158, 11, 0.3); 
            color: #fcd34d; 
        }
        
        .sync-status.offline { 
            background: rgba(239, 68, 68, 0.15); 
            border-color: rgba(239, 68, 68, 0.3); 
            color: #fca5a5; 
        }
        
        /* DEPTH LAYER 2: Stats - 50px blur */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stat-card {
            background: rgba(25, 30, 40, 0.55);
            backdrop-filter: blur(50px) saturate(130%);
            -webkit-backdrop-filter: blur(50px) saturate(130%);
            padding: 24px 20px;
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(100, 150, 255, 0.12);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }
        
        .stat-card:hover {
            background: rgba(30, 35, 50, 0.65);
            backdrop-filter: blur(60px) saturate(140%);
            -webkit-backdrop-filter: blur(60px) saturate(140%);
            transform: translateY(-6px) scale(1.02);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 
                0 16px 48px rgba(59, 130, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }
        
        .stat-label { 
            font-size: 0.75em; 
            color: rgba(255, 255, 255, 0.5); 
            margin-bottom: 12px; 
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        
        .stat-value { 
            font-size: 2.5em; 
            font-weight: 600; 
            color: #ffffff;
            letter-spacing: -0.02em;
        }
        
        /* DEPTH LAYER 3: Tabs - 45px blur */
        .tabs {
            display: flex;
            background: rgba(22, 27, 37, 0.6);
            backdrop-filter: blur(45px) saturate(120%);
            -webkit-backdrop-filter: blur(45px) saturate(120%);
            border-radius: 16px;
            padding: 8px;
            gap: 4px;
            margin-bottom: 20px;
            border: 1px solid rgba(100, 150, 255, 0.12);
            overflow-x: auto;
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.3s both;
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }
        
        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab:hover { 
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
        }
        
        .tab.active { 
            background: rgba(59, 130, 246, 0.15);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            color: #ffffff;
            box-shadow: 
                0 2px 12px rgba(59, 130, 246, 0.3),
                inset 0 0 20px rgba(59, 130, 246, 0.1);
        }
        
        /* DEPTH LAYER 4: Main content - 55px blur */
        .tab-content {
            display: none;
            padding: 32px;
            background: rgba(18, 23, 33, 0.6);
            backdrop-filter: blur(55px) saturate(130%);
            -webkit-backdrop-filter: blur(55px) saturate(130%);
            border-radius: 16px;
            border: 1px solid rgba(100, 150, 255, 0.12);
            max-height: 70vh;
            overflow-y: auto;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.04);
        }
        
        .tab-content.active { 
            display: block;
            animation: contentFade 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes contentFade {
            from { opacity: 0; transform: scale(0.97); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* DEPTH LAYER 5: Kanban columns - 60px blur */
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 24px;
        }
        
        .kanban-column {
            background: rgba(15, 23, 35, 0.2);
            backdrop-filter: blur(60px) saturate(140%);
            -webkit-backdrop-filter: blur(60px) saturate(140%);
            border-radius: 16px;
            padding: 20px;
            min-height: 500px;
            border: 1px solid rgba(100, 150, 255, 0.1);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
            transition: all 0.3s ease;
        }
        
        .kanban-column:hover {
            background: rgba(20, 28, 42, 0.28);
            border-color: rgba(59, 130, 246, 0.25);
            box-shadow: 
                0 8px 32px rgba(59, 130, 246, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        /* DEPTH LAYER 6: Headers - 35px blur (less blur, sits "above") */
        .kanban-header {
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 16px;
            padding: 12px 16px;
            border-radius: 12px;
            text-align: left;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(35px) saturate(150%);
            -webkit-backdrop-filter: blur(35px) saturate(150%);
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2);
        }
        
        .kanban-header.todo { 
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.25);
        }
        
        .kanban-header.progress { 
            background: rgba(245, 158, 11, 0.15);
            color: #fcd34d;
            border: 1px solid rgba(245, 158, 11, 0.25);
        }
        
        .kanban-header.done { 
            background: rgba(34, 197, 94, 0.15);
            color: #86efac;
            border: 1px solid rgba(34, 197, 94, 0.25);
        }
        
        .kanban-cards {
            min-height: 400px;
        }
        
        /* DEPTH LAYER 7: Cards - 70px blur (deepest, most frosted) */
        .kanban-card {
            background: rgba(40, 48, 65, 0.45);
            backdrop-filter: blur(70px) saturate(150%);
            -webkit-backdrop-filter: blur(70px) saturate(150%);
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 12px;
            cursor: move;
            border: 1px solid rgba(100, 150, 255, 0.15);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .kanban-card:hover {
            background: rgba(30, 40, 58, 0.3);
            backdrop-filter: blur(85px) saturate(160%);
            -webkit-backdrop-filter: blur(85px) saturate(160%);
            transform: translateY(-6px);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 
                0 12px 40px rgba(59, 130, 246, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .kanban-card.high-priority { border-left: 3px solid rgba(239, 68, 68, 0.7); }
        .kanban-card.med-priority { border-left: 3px solid rgba(245, 158, 11, 0.7); }
        
        .card-title {
            font-size: 0.9em;
            margin-bottom: 12px;
            color: #ffffff;
            line-height: 1.5;
        }
        
        .card-meta {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        
        /* DEPTH LAYER 8: Tags - 80px blur (nested deepest) */
        .card-tag {
            padding: 4px 10px;
            font-size: 0.7em;
            font-weight: 600;
            border-radius: 6px;
            letter-spacing: 0.03em;
            text-transform: uppercase;
            backdrop-filter: blur(80px) saturate(160%);
            -webkit-backdrop-filter: blur(80px) saturate(160%);
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3);
        }
        
        .tag-work { background: rgba(59, 130, 246, 0.25); color: #93c5fd; border: 1px solid rgba(59, 130, 246, 0.3); }
        .tag-self { background: rgba(34, 197, 94, 0.25); color: #86efac; border: 1px solid rgba(34, 197, 94, 0.3); }
        .tag-cert { background: rgba(239, 68, 68, 0.25); color: #fca5a5; border: 1px solid rgba(239, 68, 68, 0.3); }
        .tag-network { background: rgba(245, 158, 11, 0.25); color: #fcd34d; border: 1px solid rgba(245, 158, 11, 0.3); }
        
        /* DEPTH LAYER 5: Schedule container - 60px blur */
        .schedule-container {
            background: rgba(25, 32, 45, 0.5);
            backdrop-filter: blur(60px) saturate(130%);
            -webkit-backdrop-filter: blur(60px) saturate(130%);
            border-radius: 16px;
            overflow: hidden;
            margin: 24px 0;
            border: 1px solid rgba(100, 150, 255, 0.12);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }
        
        /* DEPTH LAYER 6: Time labels - 40px blur (sits above) */
        .time-label {
            padding: 16px 20px;
            background: rgba(59, 130, 246, 0.12);
            backdrop-filter: blur(40px) saturate(140%);
            -webkit-backdrop-filter: blur(40px) saturate(140%);
            border-right: 1px solid rgba(100, 150, 255, 0.1);
            border-bottom: 1px solid rgba(100, 150, 255, 0.06);
            font-weight: 600;
            color: #93c5fd;
            font-size: 0.85em;
            letter-spacing: 0.05em;
        }
        
        /* DEPTH LAYER 6: Activities - 50px blur */
        .activity {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            backdrop-filter: blur(50px);
            -webkit-backdrop-filter: blur(50px);
        }
        
        .activity:hover {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(60px) saturate(140%);
            -webkit-backdrop-filter: blur(60px) saturate(140%);
        }
        
        .activity.work { 
            border-left-color: rgba(59, 130, 246, 0.6);
            background: rgba(59, 130, 246, 0.05);
        }
        
        .activity.selfcare { 
            border-left-color: rgba(34, 197, 94, 0.6);
            background: rgba(34, 197, 94, 0.05);
        }
        
        .activity.learning { 
            border-left-color: rgba(245, 158, 11, 0.6);
            background: rgba(245, 158, 11, 0.05);
        }
        
        .activity.break { 
            border-left-color: rgba(255, 255, 255, 0.2);
        }
        
        .activity-title { 
            font-weight: 600; 
            margin-bottom: 6px;
            color: #ffffff;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .activity-desc { 
            font-size: 0.9em; 
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.6;
        }
        
        /* DEPTH LAYER 5: Week cards - 65px blur */
        .week-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 20px;
            margin: 32px 0;
        }
        
        .week-card {
            background: rgba(15, 23, 35, 0.2);
            backdrop-filter: blur(65px) saturate(135%);
            -webkit-backdrop-filter: blur(65px) saturate(135%);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(100, 150, 255, 0.12);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .week-card:hover {
            background: rgba(32, 40, 55, 0.65);
            backdrop-filter: blur(75px) saturate(145%);
            -webkit-backdrop-filter: blur(75px) saturate(145%);
            transform: translateY(-10px);
            border-color: rgba(59, 130, 246, 0.35);
            box-shadow: 
                0 20px 60px rgba(59, 130, 246, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.06);
        }
        
        /* DEPTH LAYER 6: Week headers - 45px blur */
        .week-card-header {
            background: rgba(59, 130, 246, 0.12);
            backdrop-filter: blur(45px) saturate(140%);
            -webkit-backdrop-filter: blur(45px) saturate(140%);
            color: #93c5fd;
            padding: 16px 20px;
            font-weight: 600;
            font-size: 0.9em;
            letter-spacing: 0.05em;
            border-bottom: 1px solid rgba(100, 150, 255, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.08);
        }
        
        .week-card-body {
            padding: 24px;
        }
        
        .day-section {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }
        
        .day-section:last-child { border-bottom: none; }
        
        .day-header {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 12px;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .day-tasks {
            padding-left: 24px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9em;
        }
        
        .day-tasks li {
            margin: 8px 0;
            line-height: 1.6;
        }
        
        /* DEPTH LAYER 7: Buttons - 50px blur */
        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 10px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            background: rgba(60, 70, 90, 0.4);
            backdrop-filter: blur(50px) saturate(130%);
            -webkit-backdrop-filter: blur(50px) saturate(130%);
            color: #ffffff;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(100, 150, 255, 0.15);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        .btn:hover { 
            background: rgba(70, 80, 100, 0.5);
            backdrop-filter: blur(60px) saturate(140%);
            -webkit-backdrop-filter: blur(60px) saturate(140%);
            transform: translateY(-3px);
            border-color: rgba(59, 130, 246, 0.3);
            box-shadow: 
                0 6px 20px rgba(59, 130, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }
        
        .btn:active {
            transform: scale(0.97);
        }
        
        .btn-primary { 
            background: rgba(59, 130, 246, 0.35);
            border-color: rgba(59, 130, 246, 0.4);
        }
        
        .btn-primary:hover { 
            background: rgba(59, 130, 246, 0.5);
            box-shadow: 
                0 8px 28px rgba(59, 130, 246, 0.35),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .btn-success { 
            background: rgba(34, 197, 94, 0.35);
            border-color: rgba(34, 197, 94, 0.4);
        }
        
        .btn-success:hover {
            background: rgba(34, 197, 94, 0.5);
        }
        
        .btn-danger { 
            background: rgba(239, 68, 68, 0.35);
            border-color: rgba(239, 68, 68, 0.4);
        }
        
        .btn-sm { 
            padding: 8px 16px; 
            font-size: 0.8em; 
        }
        
        /* DEPTH LAYER 5: Info boxes - 55px blur */
        .info-box, .success-box, .warning-box {
            padding: 20px;
            margin: 24px 0;
            border-radius: 12px;
            font-size: 0.95em;
            line-height: 1.7;
            border-left: 4px solid;
            backdrop-filter: blur(55px) saturate(130%);
            -webkit-backdrop-filter: blur(55px) saturate(130%);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }
        
        .info-box { 
            background: rgba(59, 130, 246, 0.12);
            border-left-color: rgba(59, 130, 246, 0.6);
        }
        
        .success-box { 
            background: rgba(34, 197, 94, 0.12);
            border-left-color: rgba(34, 197, 94, 0.6);
        }
        
        .warning-box { 
            background: rgba(239, 68, 68, 0.12);
            border-left-color: rgba(239, 68, 68, 0.6);
        }
        
        /* DEPTH LAYER 6: Podcast cards - 70px blur */
        .podcast-card {
            background: rgba(20, 28, 42, 0.22);
            backdrop-filter: blur(70px) saturate(140%);
            -webkit-backdrop-filter: blur(70px) saturate(140%);
            border: 1px solid rgba(100, 150, 255, 0.15);
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.04);
        }
        
        .podcast-card:hover {
            background: rgba(28, 38, 56, 0.32);
            backdrop-filter: blur(85px) saturate(150%);
            -webkit-backdrop-filter: blur(85px) saturate(150%);
            transform: translateX(10px);
            border-color: rgba(59, 130, 246, 0.35);
            box-shadow: 
                -10px 0 40px rgba(59, 130, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }
        
        .podcast-meta-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        /* DEPTH LAYER 7: Category badge - 60px blur */
        .podcast-category {
            padding: 6px 14px;
            background: rgba(59, 130, 246, 0.2);
            backdrop-filter: blur(60px) saturate(150%);
            -webkit-backdrop-filter: blur(60px) saturate(150%);
            border-radius: 20px;
            font-size: 0.7em;
            font-weight: 700;
            color: #93c5fd;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            border: 1px solid rgba(59, 130, 246, 0.25);
            box-shadow: inset 0 0 15px rgba(59, 130, 246, 0.1);
        }
        
        .podcast-title {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .podcast-desc {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 16px;
            line-height: 1.6;
        }
        
        /* DEPTH LAYER 8: Podcast link - 70px blur */
        .podcast-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 24px;
            background: rgba(59, 130, 246, 0.35);
            backdrop-filter: blur(70px) saturate(160%);
            -webkit-backdrop-filter: blur(70px) saturate(160%);
            color: #ffffff;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.85em;
            border-radius: 10px;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            border: 1px solid rgba(59, 130, 246, 0.4);
            box-shadow: 
                0 2px 12px rgba(59, 130, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .podcast-link:hover {
            background: rgba(59, 130, 246, 0.55);
            backdrop-filter: blur(85px) saturate(170%);
            -webkit-backdrop-filter: blur(85px) saturate(170%);
            transform: translateY(-3px);
            box-shadow: 
                0 6px 24px rgba(59, 130, 246, 0.45),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }
        
        .youtube-player-wrapper {
            margin-top: 16px;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(100, 150, 255, 0.2);
        }
        
        .youtube-player-wrapper iframe {
            width: 100%;
            height: 315px;
            border: none;
            display: block;
        }
        
        /* DEPTH LAYER 5: Upload area - 60px blur */
        .upload-area {
            background: rgba(30, 38, 52, 0.45);
            backdrop-filter: blur(60px) saturate(130%);
            -webkit-backdrop-filter: blur(60px) saturate(130%);
            border: 2px dashed rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 60px;
            text-align: center;
            margin: 32px 0;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.02);
        }
        
        .upload-area:hover { 
            background: rgba(35, 45, 65, 0.6);
            backdrop-filter: blur(75px) saturate(145%);
            -webkit-backdrop-filter: blur(75px) saturate(145%);
            border-color: rgba(59, 130, 246, 0.5);
            transform: scale(1.01);
            box-shadow: 
                0 10px 40px rgba(59, 130, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        .upload-area.has-data { 
            border-color: rgba(34, 197, 94, 0.5);
            border-style: solid;
            background: rgba(34, 197, 94, 0.1);
            backdrop-filter: blur(70px) saturate(140%);
            -webkit-backdrop-filter: blur(70px) saturate(140%);
        }
        
        /* DEPTH LAYER 5: Chart containers - 65px blur */
        .chart-container {
            background: rgba(15, 23, 35, 0.2);
            backdrop-filter: blur(65px) saturate(135%);
            -webkit-backdrop-filter: blur(65px) saturate(135%);
            border: 1px solid rgba(100, 150, 255, 0.12);
            padding: 24px;
            border-radius: 16px;
            margin: 24px 0;
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }
        
        .chart-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(100, 150, 255, 0.12);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .bar-chart { 
            display: flex; 
            flex-direction: column; 
            gap: 12px; 
        }
        
        .bar-item {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .bar-label {
            width: 140px;
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
        }
        
        /* DEPTH LAYER 6: Bar fills - 45px blur */
        .bar-fill {
            flex: 1;
            background: rgba(20, 25, 35, 0.4);
            backdrop-filter: blur(45px);
            -webkit-backdrop-filter: blur(45px);
            height: 32px;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(100, 150, 255, 0.1);
        }
        
        /* DEPTH LAYER 7: Bar progress - 55px blur */
        .bar-progress {
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(59, 130, 246, 0.5), 
                rgba(59, 130, 246, 0.7));
            backdrop-filter: blur(55px) saturate(160%);
            -webkit-backdrop-filter: blur(55px) saturate(160%);
            display: flex;
            align-items: center;
            padding-left: 12px;
            color: #ffffff;
            font-weight: 600;
            font-size: 0.8em;
            transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: inset 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        /* DEPTH LAYER 6: Tables - 60px blur */
        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(100, 150, 255, 0.1);
        }
        
        .data-table th {
            background: rgba(59, 130, 246, 0.12);
            backdrop-filter: blur(50px) saturate(140%);
            -webkit-backdrop-filter: blur(50px) saturate(140%);
            color: #93c5fd;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 0.8em;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(100, 150, 255, 0.15);
        }
        
        .data-table td { 
            padding: 14px 16px; 
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            color: rgba(255, 255, 255, 0.8);
            background: rgba(25, 32, 45, 0.3);
            backdrop-filter: blur(60px);
            -webkit-backdrop-filter: blur(60px);
        }
        
        .data-table tr:hover td { 
            background: rgba(30, 38, 55, 0.5);
            backdrop-filter: blur(70px) saturate(140%);
            -webkit-backdrop-filter: blur(70px) saturate(140%);
        }
        
        /* DEPTH LAYER 5: Forms - 60px blur */
        .add-form {
            background: rgba(28, 35, 48, 0.45);
            backdrop-filter: blur(60px) saturate(130%);
            -webkit-backdrop-filter: blur(60px) saturate(130%);
            border: 1px solid rgba(100, 150, 255, 0.12);
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 24px;
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.03);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .form-group { 
            display: flex; 
            flex-direction: column; 
        }
        
        .form-group label {
            font-size: 0.75em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* DEPTH LAYER 7: Form inputs - 70px blur */
        .form-group input, .form-group select, .form-group textarea {
            padding: 12px 16px;
            border: 1px solid rgba(100, 150, 255, 0.15);
            background: rgba(40, 50, 70, 0.4);
            backdrop-filter: blur(70px) saturate(140%);
            -webkit-backdrop-filter: blur(70px) saturate(140%);
            color: #ffffff;
            font-size: 0.95em;
            border-radius: 10px;
            font-family: 'Segoe UI', sans-serif;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.5);
            background: rgba(45, 55, 80, 0.6);
            backdrop-filter: blur(85px) saturate(150%);
            -webkit-backdrop-filter: blur(85px) saturate(150%);
            box-shadow: 
                0 0 0 3px rgba(59, 130, 246, 0.15),
                inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        h2 {
            font-size: 1.8em;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        h2 i {
            color: #3b82f6;
        }
        
        h3 {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        strong { color: #ffffff; font-weight: 600; }
        
        ul {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.8;
        }
        
        @media (max-width: 768px) {
            body { padding: 16px; }
            .kanban-board { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            h1 { font-size: 2em; }
            .week-grid { grid-template-columns: 1fr; }
        }
        
        /* Windows 11 style scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(100, 150, 255, 0.3);
            backdrop-filter: blur(40px);
            border-radius: 10px;
            border: 2px solid transparent;
            background-clip: padding-box;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.5);
            background-clip: padding-box;
        }
    
        
        /* Daily Wins styles */
        .wins-grid {
            display: grid;
            gap: 14px;
            margin-top: 20px;
        }
        
        .win-card {
            background: rgba(15, 22, 40, 0.28);
            backdrop-filter: blur(65px) saturate(150%);
            border: 1px solid rgba(139, 92, 246, 0.25);
            border-radius: 13px;
            padding: 20px;
            transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.35), 0 0 15px rgba(139, 92, 246, 0.08);
        }
        
        .win-card:hover {
            background: rgba(20, 30, 52, 0.38);
            border-color: rgba(139, 92, 246, 0.45);
            transform: translateY(-3px);
            box-shadow: 0 10px 32px rgba(139, 92, 246, 0.25), 0 0 30px rgba(139, 92, 246, 0.15);
        }
        
        .win-date {
            font-size: 0.82em;
            background: linear-gradient(135deg, #a78bfa, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 7px;
            letter-spacing: 0.02em;
        }
        
        .win-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 10px;
            margin-bottom: 14px;
        }
        
        .win-metric {
            text-align: center;
            padding: 12px 8px;
            background: rgba(99, 102, 241, 0.18);
            border-radius: 10px;
            backdrop-filter: blur(45px);
            border: 1px solid rgba(99, 102, 241, 0.3);
            box-shadow: 0 0 12px rgba(99, 102, 241, 0.1);
        }
        
        .win-metric-value {
            font-size: 1.6em;
            font-weight: 700;
            background: linear-gradient(135deg, #a5b4fc, #34d399);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .win-metric-label {
            font-size: 0.68em;
            color: rgba(255, 255, 255, 0.65);
            text-transform: uppercase;
            margin-top: 5px;
            letter-spacing: 0.04em;
            font-weight: 600;
        }
        
        .win-notes {
            font-size: 0.92em;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.85);
            font-style: italic;
            padding: 12px 14px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            border-left: 3px solid rgba(139, 92, 246, 0.5);
        }

    
        
        /* MOBILE KANBAN */
        .mobile-kanban { display: none; }
        
        .mobile-column-tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 16px;
            background: rgba(15, 22, 40, 0.35);
            backdrop-filter: blur(40px);
            padding: 6px;
            border-radius: 14px;
            border: 1px solid rgba(139, 92, 246, 0.25);
        }
        
        .mobile-column-tab {
            flex: 1;
            padding: 14px 8px;
            border: none;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: 700;
            cursor: pointer;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            min-height: 60px;
        }
        
        .mobile-column-tab i { font-size: 1.2em; }
        
        .mobile-column-tab.active {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.35), rgba(99, 102, 241, 0.35));
            color: #ffffff;
            box-shadow: 0 3px 16px rgba(139, 92, 246, 0.5), inset 0 0 20px rgba(139, 92, 246, 0.2);
        }
        
        .mobile-column-tab.active.todo { 
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.3));
            box-shadow: 0 3px 16px rgba(239, 68, 68, 0.4);
        }
        
        .mobile-column-tab.active.progress { 
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.3), rgba(217, 119, 6, 0.3));
            box-shadow: 0 3px 16px rgba(245, 158, 11, 0.4);
        }
        
        .mobile-column-tab.active.done { 
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(22, 163, 74, 0.3));
            box-shadow: 0 3px 16px rgba(34, 197, 94, 0.4);
        }
        
        .mobile-cards-container { min-height: 400px; }
        
        .mobile-kanban-card {
            background: rgba(20, 30, 50, 0.28);
            backdrop-filter: blur(70px) saturate(155%);
            padding: 18px;
            margin-bottom: 14px;
            border-radius: 13px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.35), 0 0 15px rgba(139, 92, 246, 0.1);
            min-height: 100px;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .mobile-kanban-card:active {
            transform: scale(0.98);
            background: rgba(25, 38, 60, 0.38);
        }
        
        .mobile-kanban-card.high-priority { 
            border-left: 4px solid rgba(239, 68, 68, 0.95);
            box-shadow: -3px 0 15px rgba(239, 68, 68, 0.25), 0 4px 16px rgba(0, 0, 0, 0.35);
        }
        
        .mobile-kanban-card.med-priority { 
            border-left: 4px solid rgba(245, 158, 11, 0.95);
            box-shadow: -3px 0 15px rgba(245, 158, 11, 0.25), 0 4px 16px rgba(0, 0, 0, 0.35);
        }
        
        .mobile-card-title {
            font-size: 0.98em;
            margin-bottom: 13px;
            line-height: 1.5;
            font-weight: 500;
        }
        
        .mobile-action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 14px;
        }
        
        .mobile-action-btn {
            flex: 1;
            padding: 12px 10px;
            border: none;
            border-radius: 9px;
            font-size: 0.72em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
            text-transform: uppercase;
            letter-spacing: 0.04em;
            backdrop-filter: blur(50px);
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }
        
        .mobile-action-btn.todo-btn {
            background: rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
        
        .mobile-action-btn.progress-btn {
            background: rgba(245, 158, 11, 0.3);
            color: #fcd34d;
            border: 1px solid rgba(245, 158, 11, 0.5);
        }
        
        .mobile-action-btn.done-btn {
            background: rgba(34, 197, 94, 0.3);
            color: #86efac;
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
        
        .mobile-action-btn:active {
            transform: scale(0.94);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .kanban-board { display: none !important; }
            .mobile-kanban { display: block !important; }
            
            body { padding: 14px; }
            header { padding: 18px 20px; }
            h1 { font-size: 1.75em; }
            .tabs { overflow-x: scroll; -webkit-overflow-scrolling: touch; }
            .tab { flex-shrink: 0; padding: 11px 14px; font-size: 0.72em; }
            .win-metrics { grid-template-columns: repeat(4, 1fr); }
        }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px;">
                <div>
                    <h1>
                        <i class="fa-solid fa-rocket"></i>Command Center
                        <span class="sync-status" id="sync-status">
                            <i class="fa-solid fa-circle-notch fa-spin"></i> Loading...
                        </span>
                    </h1>
                    <p class="subtitle">Job Search Â· Balance Â· Success Â· Dec 12 - Feb 9, 2026</p>
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button class="btn btn-sm" onclick="exportData()" title="Download backup">
                        <i class="fa-solid fa-download"></i> Export
                    </button>
                    <button class="btn btn-sm" onclick="document.getElementById('import-file').click()" title="Upload backup">
                        <i class="fa-solid fa-upload"></i> Import
                    </button>
                    <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importData(event)">
                    <button class="btn btn-sm btn-primary" onclick="manualSync()" id="sync-btn" title="Sync to Google Sheets">
                        <i class="fa-solid fa-cloud-arrow-up"></i> Sync
                    </button>
                </div>
            </div>
        </header>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Applications</div>
                <div class="stat-value" id="stat-apps">â€”</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Week</div>
                <div class="stat-value" id="stat-week">1</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Response</div>
                <div class="stat-value" id="stat-rate">â€”</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Interviews</div>
                <div class="stat-value" id="stat-interviews">â€”</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Network</div>
                <div class="stat-value" id="stat-contacts">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Tasks</div>
                <div class="stat-value" id="stat-tasks">0/14</div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('kanban')"><i class="fa-solid fa-table-columns"></i> Board</button>
            
            
            <button class="tab" onclick="switchTab('wins')"><i class="fa-solid fa-trophy"></i> Wins</button>
            <button class="tab" onclick="switchTab('coach')"><i class="fa-solid fa-clipboard-check"></i> Coach</button>
            <button class="tab" onclick="switchTab('schedule')"><i class="fa-solid fa-calendar-days"></i> Schedule</button>
            <button class="tab" onclick="switchTab('plan')"><i class="fa-solid fa-list-check"></i> Plan</button>
            <button class="tab" onclick="switchTab('dashboard')"><i class="fa-solid fa-chart-line"></i> Analytics</button>
            <button class="tab" onclick="switchTab('networking')"><i class="fa-solid fa-users"></i> Network</button>
            <button class="tab" onclick="switchTab('selfcare')"><i class="fa-solid fa-heart"></i> Balance</button>
            <button class="tab" onclick="switchTab('claude')"><i class="fa-solid fa-robot"></i> Claude</button>
        </div>
        
        <!-- KANBAN TAB -->
        <div id="kanban" class="tab-content active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2><i class="fa-solid fa-grip-vertical"></i><span id="kanban-date"></span></h2>
                <button class="btn btn-success" onclick="resetWithJustification()"><i class="fa-solid fa-rotate-right"></i> Reset</button>
            </div>
            
            <div class="info-box">
                <strong><i class="fa-solid fa-circle-info"></i> Instructions:</strong> Drag cards between columns to track your progress
            </div>
            
            <div class="kanban-board">
                <div class="kanban-column">
                    <div class="kanban-header todo"><i class="fa-solid fa-circle"></i> To Do</div>
                    <div class="kanban-cards" id="todo-column" ondrop="drop(event, 'todo')" ondragover="allowDrop(event)"></div>
                </div>
                <div class="kanban-column">
                    <div class="kanban-header progress"><i class="fa-solid fa-spinner"></i> In Progress</div>
                    <div class="kanban-cards" id="progress-column" ondrop="drop(event, 'progress')" ondragover="allowDrop(event)"></div>
                </div>
                <div class="kanban-column">
                    <div class="kanban-header done"><i class="fa-solid fa-circle-check"></i> Done</div>
                    <div class="kanban-cards" id="done-column" ondrop="drop(event, 'done')" ondragover="allowDrop(event)"></div>
                </div>
            </div>
            
            <!-- MOBILE KANBAN -->
            <div class="mobile-kanban">
                <div class="mobile-column-tabs">
                    <button class="mobile-column-tab todo active" onclick="switchMobileColumn('todo')" id="mobile-tab-todo">
                        <i class="fa-solid fa-circle"></i>
                        <span>To Do</span>
                    </button>
                    <button class="mobile-column-tab progress" onclick="switchMobileColumn('progress')" id="mobile-tab-progress">
                        <i class="fa-solid fa-spinner"></i>
                        <span>Progress</span>
                    </button>
                    <button class="mobile-column-tab done" onclick="switchMobileColumn('done')" id="mobile-tab-done">
                        <i class="fa-solid fa-check-circle"></i>
                        <span>Done</span>
                    </button>
                </div>
                <div class="mobile-cards-container" id="mobile-cards"></div>
            </div>
        </div>
        
        
        
        <!-- DAILY WINS TAB -->
        <div id="wins" class="tab-content">
            <h2><i class="fa-solid fa-trophy"></i>Daily Wins Journal</h2>
            
            <div class="success-box">
                <strong><i class="fa-solid fa-heart-pulse"></i> Track Your Momentum:</strong> Log daily wins to stay motivated and see your progress building over the 9-week campaign!
            </div>
            
            <div style="background: rgba(15, 22, 40, 0.3); backdrop-filter: blur(60px) saturate(145%); border: 1px solid rgba(139, 92, 246, 0.25); padding: 22px; border-radius: 14px; margin-bottom: 22px; box-shadow: 0 6px 24px rgba(0, 0, 0, 0.35), 0 0 20px rgba(139, 92, 246, 0.1);">
                <h3 style="margin-bottom: 18px; display: flex; align-items: center; gap: 9px;">
                    <i class="fa-solid fa-pen-to-square"></i> Log Today's Progress
                </h3>
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fa-solid fa-calendar"></i> Date</label>
                        <input type="date" id="win-date" />
                    </div>
                    <div class="form-group">
                        <label><i class="fa-solid fa-paper-plane"></i> Apps Sent</label>
                        <input type="number" id="win-apps" min="0" placeholder="5" />
                    </div>
                    <div class="form-group">
                        <label><i class="fa-solid fa-inbox"></i> Responses</label>
                        <input type="number" id="win-responses" min="0" placeholder="1" />
                    </div>
                    <div class="form-group">
                        <label><i class="fa-solid fa-user-plus"></i> Connections</label>
                        <input type="number" id="win-connections" min="0" placeholder="3" />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fa-solid fa-star"></i> Today's Wins & Highlights</label>
                        <textarea id="win-notes" rows="3" placeholder="Example: Great networking call with Amazon PM, completed SAFe module 3, productive gym session, applied to 5 dream jobs..."></textarea>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="saveWin()" style="width: 100%;">
                    <i class="fa-solid fa-plus-circle"></i> Save Today's Win
                </button>
            </div>
            
            <h3 style="margin: 28px 0 16px; display: flex; align-items: center; gap: 9px; justify-content: space-between;">
                <span><i class="fa-solid fa-calendar-days"></i> Progress Journal (<span id="wins-count">0</span> entries)</span>
            </h3>
            <div class="wins-grid" id="wins-list"></div>
        </div>

        
        
        <!-- COACH TAB - ACCOUNTABILITY DASHBOARD -->
        <div id="coach" class="tab-content">
            <h2><i class="fa-solid fa-clipboard-check"></i>Accountability Coach</h2>
            
            <div id="daily-coaching-message" style="background: rgba(99, 102, 241, 0.2); backdrop-filter: blur(60px); border: 1px solid rgba(99, 102, 241, 0.4); padding: 20px; border-radius: 14px; margin-bottom: 24px; box-shadow: 0 6px 24px rgba(99, 102, 241, 0.2);">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <div style="font-size: 2em;"><i class="fa-solid fa-comment-dots"></i></div>
                    <h3 style="margin: 0; font-size: 1.1em;">Your Coach Says:</h3>
                </div>
                <div id="coach-message" style="font-size: 1.05em; line-height: 1.7; color: rgba(255, 255, 255, 0.95);"></div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 14px; margin-bottom: 24px;">
                <div style="background: rgba(34, 197, 94, 0.2); backdrop-filter: blur(60px); border: 1px solid rgba(34, 197, 94, 0.4); padding: 18px; border-radius: 12px; text-align: center;">
                    <div style="font-size: 0.75em; color: rgba(255, 255, 255, 0.7); margin-bottom: 8px; text-transform: uppercase; font-weight: 600;">This Week</div>
                    <div id="week-completion" style="font-size: 2.5em; font-weight: 700; background: linear-gradient(135deg, #86efac, #34d399); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">0%</div>
                </div>
                <div style="background: rgba(245, 158, 11, 0.2); backdrop-filter: blur(60px); border: 1px solid rgba(245, 158, 11, 0.4); padding: 18px; border-radius: 12px; text-align: center;">
                    <div style="font-size: 0.75em; color: rgba(255, 255, 255, 0.7); margin-bottom: 8px; text-transform: uppercase; font-weight: 600;">Current Streak</div>
                    <div id="current-streak" style="font-size: 2.5em; font-weight: 700; background: linear-gradient(135deg, #fbbf24, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">0 ðŸ”¥</div>
                </div>
                <div style="background: rgba(139, 92, 246, 0.2); backdrop-filter: blur(60px); border: 1px solid rgba(139, 92, 246, 0.4); padding: 18px; border-radius: 12px; text-align: center;">
                    <div style="font-size: 0.75em; color: rgba(255, 255, 255, 0.7); margin-bottom: 8px; text-transform: uppercase; font-weight: 600;">On-Time Rate</div>
                    <div id="ontime-rate" style="font-size: 2.5em; font-weight: 700; background: linear-gradient(135deg, #a78bfa, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">â€”</div>
                </div>
                <div style="background: rgba(239, 68, 68, 0.2); backdrop-filter: blur(60px); border: 1px solid rgba(239, 68, 68, 0.4); padding: 18px; border-radius: 12px; text-align: center;">
                    <div style="font-size: 0.75em; color: rgba(255, 255, 255, 0.7); margin-bottom: 8px; text-transform: uppercase; font-weight: 600;">Tasks Skipped</div>
                    <div id="tasks-skipped" style="font-size: 2.5em; font-weight: 700; color: #fca5a5;">0</div>
                </div>
            </div>
            
            <div id="pattern-alerts"></div>
            
            <h3 style="margin: 28px 0 16px; display: flex; align-items: center; gap: 9px;">
                <i class="fa-solid fa-chart-line"></i> Performance Breakdown
            </h3>
            
            <div style="background: rgba(15, 22, 40, 0.28); backdrop-filter: blur(65px); border: 1px solid rgba(139, 92, 246, 0.2); padding: 22px; border-radius: 13px;">
                <table style="width: 100%; color: rgba(255, 255, 255, 0.9);">
                    <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <td style="padding: 12px 0; font-weight: 600;">Completed On-Time</td>
                        <td id="completed-ontime" style="padding: 12px 0; text-align: right; color: #86efac;">â€”</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <td style="padding: 12px 0; font-weight: 600;">Completed Late</td>
                        <td id="completed-late" style="padding: 12px 0; text-align: right; color: #fbbf24;">â€”</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <td style="padding: 12px 0; font-weight: 600;">Still In Progress</td>
                        <td id="in-progress" style="padding: 12px 0; text-align: right; color: #60a5fa;">â€”</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px 0; font-weight: 600;">Skipped (Permanent Record)</td>
                        <td id="skipped-total" style="padding: 12px 0; text-align: right; color: #fca5a5;">â€”</td>
                    </tr>
                </table>
            </div>
            
            <div style="margin-top: 24px; padding: 20px; background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px;" id="skip-shame-box">
                <h3 style="margin-bottom: 16px; display: flex; align-items: center; gap: 9px; color: #fca5a5;">
                    <i class="fa-solid fa-triangle-exclamation"></i> Most Skipped Tasks (Your Weaknesses)
                </h3>
                <div id="most-skipped-list"></div>
            </div>
        </div>

        <!-- SCHEDULE TAB -->
        <div id="schedule" class="tab-content">
            <h2><i class="fa-solid fa-clock"></i>Daily Protocol</h2>
            
            <div style="margin-bottom: 24px; display: flex; gap: 12px;">
                <button class="btn btn-primary" onclick="showSchedule('weekday')"><i class="fa-solid fa-briefcase"></i> Weekday</button>
                <button class="btn" onclick="showSchedule('weekend')"><i class="fa-solid fa-mug-hot"></i> Weekend</button>
            </div>
            
            <div class="success-box">
                <strong><i class="fa-solid fa-balance-scale"></i> Balance:</strong> 5 hours work + 3 hours self-care + 3.5 hours personal + 7.5 hours sleep
            </div>
            
            <div id="schedule-content"></div>
        </div>
        
        <!-- PLAN TAB -->
        <div id="plan" class="tab-content">
            <h2><i class="fa-solid fa-chess"></i>9-Week Strategy</h2>
            <p style="color: rgba(255, 255, 255, 0.5); margin-bottom: 24px;">December 12, 2025 â†’ February 9, 2026</p>
            
            <div class="warning-box">
                <strong><i class="fa-solid fa-triangle-exclamation"></i> Commitment:</strong> Intensive execution with integrated rest. Self-care mandatory for sustainability.
            </div>
            
            <div id="plan-grid"></div>
        </div>
        
        <!-- DASHBOARD TAB -->
        <div id="dashboard" class="tab-content">
            <h2><i class="fa-solid fa-chart-pie"></i>Application Analytics</h2>
            
            <div class="info-box">
                <strong><i class="fa-solid fa-database"></i> Data Source:</strong> Export Google Sheets as Excel â†’ Upload here
            </div>
            
            <div class="upload-area" id="upload-area" onclick="document.getElementById('excel-upload').click()">
                <div style="font-size: 3em; margin-bottom: 16px; color: #3b82f6;"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                <div style="font-size: 1.1em; font-weight: 600; margin-bottom: 8px;" id="upload-text">
                    Upload Excel File
                </div>
                <div style="font-size: 0.85em; color: rgba(255, 255, 255, 0.5);">
                    .xlsx format required
                </div>
            </div>
            <input type="file" id="excel-upload" accept=".xlsx,.xls" style="display: none;" onchange="handleFileUpload(event)">
            
            <div id="dashboard-content" style="display: none;">
                <div class="success-box">
                    <strong><i class="fa-solid fa-check-circle"></i> Data Loaded:</strong> <span id="data-summary"></span>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin: 24px 0;">
                    <div class="chart-container">
                        <div class="chart-title"><i class="fa-solid fa-gauge-high"></i> Key Metrics</div>
                        <div id="insights-box"></div>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title"><i class="fa-solid fa-list-check"></i> Action Items</div>
                        <div id="action-box"></div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title"><i class="fa-solid fa-chart-pie"></i> Status Distribution</div>
                    <div class="bar-chart" id="status-chart"></div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title"><i class="fa-solid fa-chart-line"></i> Weekly Activity</div>
                    <div class="bar-chart" id="week-chart"></div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title"><i class="fa-solid fa-building"></i> Top Targets</div>
                    <div class="bar-chart" id="company-chart"></div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title"><i class="fa-solid fa-clock-rotate-left"></i> Recent Activity</div>
                    <div id="recent-apps"></div>
                </div>
            </div>
        </div>
        
        <!-- NETWORKING TAB -->
        <div id="networking" class="tab-content">
            <h2><i class="fa-solid fa-address-book"></i>Network Log</h2>
            
            <div class="add-form">
                <h3 style="margin-bottom: 16px; font-size: 1.1em; display: flex; align-items: center; gap: 10px;"><i class="fa-solid fa-user-plus"></i> Add Contact</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="contact-name" placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" id="contact-company" placeholder="Amazon">
                    </div>
                    <div class="form-group">
                        <label>Connection</label>
                        <select id="contact-type">
                            <option value="Northeastern Alum">Northeastern Alum</option>
                            <option value="State Street Contact">State Street Contact</option>
                            <option value="Referral">Referral</option>
                            <option value="Cold">Cold Outreach</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="contact-status">
                            <option value="Email Sent">Email Sent</option>
                            <option value="Response Received">Response Received</option>
                            <option value="Meeting Scheduled">Meeting Scheduled</option>
                            <option value="Meeting Done">Meeting Done</option>
                            <option value="No Response">No Response</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="contact-notes" placeholder="Discussion details..." rows="3"></textarea>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="addContact()"><i class="fa-solid fa-plus"></i> Add Contact</button>
            </div>
            
            <div id="contacts-list"></div>
        </div>
        
        <!-- SELF-CARE TAB -->
        <div id="selfcare" class="tab-content">
            <h2><i class="fa-solid fa-spa"></i>Balance Guide</h2>
            <p style="color: rgba(255, 255, 255, 0.5); margin-bottom: 24px;"><i class="fa-solid fa-location-dot"></i> Austin, Texas</p>
            
            <div class="success-box">
                <strong><i class="fa-solid fa-brain"></i> Foundation:</strong> Mental clarity enables optimal execution. Self-care is strategic.
            </div>
            
            <div class="chart-container">
                <div class="chart-title"><i class="fa-solid fa-dumbbell"></i> Fitness Locations</div>
                <ul style="padding-left: 24px;">
                    <li>Lifetime Fitness (Downtown) â€” Full amenities</li>
                    <li>Equinox (Domain) â€” Premium experience</li>
                    <li>UT RecSports â€” If accessible</li>
                    <li>Zilker Park â€” Free outdoor facility</li>
                    <li style="color: #86efac; font-weight: 600; margin-top: 8px;"><i class="fa-solid fa-bullseye"></i> Target: 4-5x weekly, 06:30 start</li>
                </ul>
            </div>
            
            <div class="chart-container">
                <div class="chart-title"><i class="fa-solid fa-car"></i> Scenic Routes</div>
                <ul style="padding-left: 24px;">
                    <li>360 Bridge (Pennybacker) â€” 30 min, optimal sunset</li>
                    <li>Hill Country Loop â€” 1-2 hours to Wimberley</li>
                    <li>Lake Travis Circuit â€” 45 min waterfront</li>
                    <li>Mount Bonnell â€” 15 min + short hike</li>
                    <li style="color: #86efac; font-weight: 600; margin-top: 8px;"><i class="fa-solid fa-route"></i> Deploy after rejection or fatigue</li>
                </ul>
            </div>
            
            <div class="chart-container">
                <div class="chart-title"><i class="fa-solid fa-mug-saucer"></i> Work Cafes</div>
                <ul style="padding-left: 24px;">
                    <li>Houndstooth Coffee (North Loop) â€” Quiet, reliable wifi</li>
                    <li>Figure 8 Coffee (East 6th) â€” Spacious layout</li>
                    <li>Cosmic Coffee + Beer â€” Dual-purpose</li>
                    <li>Mozart's (Lake Austin) â€” Lakeside inspiration</li>
                    <li style="color: #86efac; font-weight: 600; margin-top: 8px;"><i class="fa-solid fa-repeat"></i> Frequency: 2-3x weekly</li>
                </ul>
            </div>
            
            <div class="chart-container">
                <div class="chart-title"><i class="fa-solid fa-gamepad"></i> Gaming Protocol</div>
                <ul style="padding-left: 24px;">
                    <li>Daily allocation: 1-2 hours post-work</li>
                    <li>Prerequisite: Job tasks completed</li>
                    <li>Function: Stress decompression</li>
                    <li>Mindset: Earned recovery, zero guilt</li>
                </ul>
            </div>
            
            <div class="warning-box">
                <strong><i class="fa-solid fa-shield-halved"></i> Non-Negotiable Rules:</strong>
                <ul style="margin-top: 12px; padding-left: 24px; line-height: 1.8;">
                    <li>18:00 hard termination (daily)</li>
                    <li>Fitness: 4-5x weekly minimum</li>
                    <li>Sleep: 23:00-07:00 (8 hours)</li>
                    <li>Sunday rest: 50% minimum</li>
                    <li>Social: 1-2x weekly mandatory</li>
                    <li>5+ rejections = Immediate self-care</li>
                </ul>
            </div>
        </div>
        
        <!-- CLAUDE TAB -->
        <div id="claude" class="tab-content">
            <h2><i class="fa-solid fa-robot"></i>AI Assistant</h2>
            
            <div class="info-box">
                <strong><i class="fa-solid fa-sparkles"></i> Instant Help:</strong> Get assistance with resume, cover letters, behavioral questions, or job search strategy
            </div>
            
            <!-- Desktop: iframe -->
            <div id="claude-desktop" style="width: 100%; height: 62vh; border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 14px; overflow: hidden; background: rgba(12, 18, 32, 0.28); backdrop-filter: blur(60px); box-shadow: 0 6px 24px rgba(0, 0, 0, 0.4), 0 0 25px rgba(139, 92, 246, 0.1);">
                <iframe src="https://claude.ai" style="width: 100%; height: 100%; border: none;"></iframe>
            </div>
            
            <!-- Mobile: Open in new tab -->
            <div id="claude-mobile" style="display: none; text-align: center; padding: 60px 24px;">
                <div style="font-size: 4.5em; margin-bottom: 24px;">
                    <i class="fa-solid fa-robot" style="background: linear-gradient(135deg, #a78bfa, #22d3ee, #fbbf24); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
                </div>
                <h3 style="margin-bottom: 14px; font-size: 1.3em;">Claude AI Assistant</h3>
                <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 28px; line-height: 1.7; max-width: 400px; margin-left: auto; margin-right: auto;">
                    Claude works best in a dedicated window on mobile. Tap below to open Claude in a new tab.
                </p>
                <a href="https://claude.ai" target="_blank" class="btn btn-primary" style="text-decoration: none; font-size: 1em; padding: 14px 32px;">
                    <i class="fa-solid fa-external-link-alt"></i> Open Claude AI
                </a>
            </div>
        </div>
        
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // ========================================
        // GOOGLE SHEETS CONFIGURATION
        // ========================================
        // STEP 5: PASTE YOUR CREDENTIALS HERE â¬‡ï¸
        const GOOGLE_CLIENT_ID = '386503336000-vh5688rm5f3984vu833ih1h05pi58ltm.apps.googleusercontent.com';
        const GOOGLE_SHEET_ID = '1mPnDjoIMwVHZ618x3WLnTXbDZEAITNSoBrU8pY9k2Do';
        
        // Google API variables
        let gapiInited = false;
        let gisInited = false;
        let tokenClient;
        let accessToken = null;
        
        // Initialize Google API
        function gapiLoaded() {
            gapi.load('client', initializeGapiClient);
        }
        
        async function initializeGapiClient() {
            await gapi.client.init({
                discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
            });
            gapiInited = true;
            maybeEnableSync();
        }
        
        function gisLoaded() {
            if (GOOGLE_CLIENT_ID === 'YOUR_CLIENT_ID_HERE') {
                updateSyncStatus('offline', 'Not Configured');
                return;
            }
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: GOOGLE_CLIENT_ID,
                scope: 'https://www.googleapis.com/auth/spreadsheets',
                callback: '',
            });
            gisInited = true;
            maybeEnableSync();
        }
        
        async function maybeEnableSync() {
            if (gapiInited && gisInited) {
                updateSyncStatus('syncing', 'Checking...');
                
                // Try to restore token from localStorage
                const storedToken = localStorage.getItem('googleAuthToken');
                if (storedToken) {
                    try {
                        const token = JSON.parse(storedToken);
                        // Set the token
                        gapi.client.setToken(token);
                        accessToken = token;
                        
                        // Try to load data - if it works, we're good!
                        const loaded = await loadFromSheets();
                        if (loaded) {
                            // Token is valid, enable auto-sync
                            enableAutoSync();
                            renderKanban();
                            renderMobileKanban();
                            renderContacts();
                            renderWins();
            if (document.getElementById('coach')) renderCoachDashboard();
                            updateStats();
                            console.log('âœ… Auto-loaded from cloud!');
                            return;
                        }
                    } catch (err) {
                        console.log('Token expired or invalid:', err);
                        localStorage.removeItem('googleAuthToken');
                    }
                }
                
                // No valid token found
                updateSyncStatus('offline', 'Click Sync');
            }
        }
        
        function updateSyncStatus(status, text) {
            const statusEl = document.getElementById('sync-status');
            if (statusEl) {
                statusEl.className = 'sync-status ' + status;
                const icons = {
                    'synced': 'check-circle',
                    'syncing': 'circle-notch fa-spin',
                    'offline': 'cloud-slash'
                };
                statusEl.innerHTML = `<i class="fa-solid fa-${icons[status]}"></i> ${text}`;
            }
        }
        
        // Manual Sync (First time authorization or force sync)
        async function manualSync() {
            if (!GOOGLE_CLIENT_ID || GOOGLE_CLIENT_ID === 'YOUR_CLIENT_ID_HERE') {
                alert('âš ï¸ Google Sheets not configured yet!\\n\\nPlease complete Step 5:\\n1. Open this HTML file in a text editor\\n2. Find: const GOOGLE_CLIENT_ID\\n3. Paste your Client ID and Sheet ID\\n4. Save and reload');
                return;
            }
            
            updateSyncStatus('syncing', 'Connecting...');
            
            tokenClient.callback = async (resp) => {
                if (resp.error !== undefined) {
                    updateSyncStatus('offline', 'Auth Failed');
                    alert('Google authorization failed. Please try again.');
                    return;
                }
                
                // Save token to localStorage for persistence
                accessToken = gapi.client.getToken();
                if (accessToken) {
                    localStorage.setItem('googleAuthToken', JSON.stringify(accessToken));
                    console.log('âœ… Token saved to localStorage');
                }
                
                // Enable auto-sync
                enableAutoSync();
                
                // Save current data
                await saveToSheets();
                
                // Load any data from sheets that might exist
                await loadFromSheets();
                renderKanban();
                renderMobileKanban();
                renderContacts();
                renderWins();
                updateStats();
            };
            
            if (gapi.client.getToken() === null) {
                tokenClient.requestAccessToken({prompt: 'consent'});
            } else {
                tokenClient.requestAccessToken({prompt: ''});
            }
        }
        
        async function saveToSheets() {
            try {
                updateSyncStatus('syncing', 'Saving...');
                const data = {
                    kanbanState: storage.getObj('kanbanState'),
                    contacts: storage.get('contacts'),
                    dailyWins: storage.get('dailyWins'),
                    kanbanDate: localStorage.getItem('kanbanDate'),
                    lastSync: new Date().toISOString()
                };
                
                await gapi.client.sheets.spreadsheets.values.update({
                    spreadsheetId: GOOGLE_SHEET_ID,
                    range: 'Sheet1!A1',
                    valueInputOption: 'RAW',
                    resource: {
                        values: [[JSON.stringify(data)]]
                    }
                });
                
                updateSyncStatus('synced', 'Synced âœ“');
                console.log('âœ… Data synced to Google Sheets');
            } catch (err) {
                console.error('Sync error:', err);
                updateSyncStatus('offline', 'Sync Failed');
                alert('Sync failed: ' + err.message);
            }
        }
        
        async function loadFromSheets() {
            if (!GOOGLE_SHEET_ID || GOOGLE_SHEET_ID === 'YOUR_SHEET_ID_HERE') {
                updateSyncStatus('offline', 'Not Configured');
                return;
            }
            
            try {
                const response = await gapi.client.sheets.spreadsheets.values.get({
                    spreadsheetId: GOOGLE_SHEET_ID,
                    range: 'Sheet1!A1',
                });
                
                if (response.result.values && response.result.values[0] && response.result.values[0][0]) {
                    const data = JSON.parse(response.result.values[0][0]);
                    localStorage.setItem('kanbanState', JSON.stringify(data.kanbanState || {}));
                    localStorage.setItem('contacts', JSON.stringify(data.contacts || []));
                    localStorage.setItem('dailyWins', JSON.stringify(data.dailyWins || []));
                    if (data.kanbanDate) localStorage.setItem('kanbanDate', data.kanbanDate);
                    updateSyncStatus('synced', 'Loaded âœ“');
                    console.log('âœ… Data loaded from Google Sheets');
                    return true;
                }
            } catch (err) {
                console.log('No cloud data or not authorized yet');
            }
            return false;
        }
        
        // AUTO-SYNC FUNCTIONALITY
        let autoSyncEnabled = false;
        let autoSyncTimeout;
        
        function enableAutoSync() {
            autoSyncEnabled = true;
            console.log('âœ… Auto-sync enabled');
            
            // Update status
            setTimeout(() => {
                if (document.getElementById('sync-status').textContent.includes('Synced')) {
                    updateSyncStatus('synced', 'Auto-Sync ON');
                }
            }, 2000);
        }
        
        function triggerAutoSync() {
            if (!autoSyncEnabled || !accessToken) return;
            
            // Clear existing timeout
            clearTimeout(autoSyncTimeout);
            
            // Set new timeout for 3 seconds
            updateSyncStatus('syncing', 'Syncing...');
            autoSyncTimeout = setTimeout(async () => {
                await saveToSheets();
            }, 3000);
        }
        
        // Override storage functions to trigger auto-sync
        const storage = {
            get: (key) => JSON.parse(localStorage.getItem(key) || '[]'),
            set: (key, data) => {
                localStorage.setItem(key, JSON.stringify(data));
                triggerAutoSync();
            },
            getObj: (key) => JSON.parse(localStorage.getItem(key) || '{}'),
            setObj: (key, data) => {
                localStorage.setItem(key, JSON.stringify(data));
                triggerAutoSync();
            }
        };
        
        // Export/Import backup functions
        function exportData() {
            const data = {
                kanbanState: storage.getObj('kanbanState'),
                contacts: storage.get('contacts'),
                kanbanDate: localStorage.getItem('kanbanDate'),
                exported: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `command-center-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            alert('âœ… Data exported successfully!');
        }
        
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    localStorage.setItem('kanbanState', JSON.stringify(data.kanbanState || {}));
                    localStorage.setItem('contacts', JSON.stringify(data.contacts || []));
                    if (data.kanbanDate) localStorage.setItem('kanbanDate', data.kanbanDate);
                    alert('âœ… Data imported successfully! Refreshing...');
                    location.reload();
                } catch (err) {
                    alert('âŒ Import failed: ' + err.message);
                }
            };
            reader.readAsText(file);
        }
        
        // Auto-sync after changes (debounced)
        let syncTimeout;
        function autoSync() {
            if (!accessToken || !GOOGLE_SHEET_ID || GOOGLE_SHEET_ID === 'YOUR_SHEET_ID_HERE') {
                return; // Not configured yet
            }
            clearTimeout(syncTimeout);
            syncTimeout = setTimeout(() => {
                saveToSheets();
            }, 3000); // Debounce 3 seconds
        }
        
        let appData = null;
        
        
        
        function getPodcastRecommendations() {
            const today = new Date().getDay();
            const todayPodcasts = podcastDatabase.filter(p => p.days.includes(today));
            while (todayPodcasts.length < 2) {
                const random = podcastDatabase[Math.floor(Math.random() * podcastDatabase.length)];
                if (!todayPodcasts.includes(random)) todayPodcasts.push(random);
            }
            return todayPodcasts.slice(0, 2);
        }
        
        
        
        
        
        function playYouTubePopup(searchTerm, title) {
            // Open YouTube search in a popup window (Picture-in-Picture style)
            const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(searchTerm)}`;
            const popup = window.open(
                searchUrl,
                'YouTubePlayer',
                'width=800,height=600,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,status=no'
            );
            
            if (popup) {
                popup.focus();
            } else {
                // If popup blocked, open in new tab
                window.open(searchUrl, '_blank');
            }
        }
        
        
        
        document.addEventListener('DOMContentLoaded', () => {
            // Process past days to detect skips FIRST
            processHistoricalSkips();
            
            updateStats();
            initKanban();
            renderContacts();

            renderWins();
            renderPlan();
            
            // Set today's date in wins form
            const winDateInput = document.getElementById('win-date');
            if (winDateInput) winDateInput.valueAsDate = new Date();
            
            updateCurrentDate();
            
            // Initialize Google Sheets API
            updateSyncStatus('syncing', 'Loading API...');
            if (typeof gapi !== 'undefined') {
                gapiLoaded();
            }
            if (typeof google !== 'undefined' && google.accounts) {
                gisLoaded();
            }
        });
        
        function updateCurrentDate() {
            const now = new Date();
            document.getElementById('kanban-date').textContent = now.toLocaleDateString('en-US', { 
                weekday: 'long',
                month: 'long', 
                day: 'numeric'
            });
            
            const startDate = new Date('2025-12-12');
            const diffDays = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
            const currentWeek = Math.min(Math.max(Math.floor(diffDays / 7) + 1, 1), 9);
            document.getElementById('stat-week').textContent = currentWeek;
        }
        
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        
            
            // Claude mobile detection
            if (tabName === 'claude') {
                const isMobile = window.innerWidth <= 768;
                const desktop = document.getElementById('claude-desktop');
                const mobile = document.getElementById('claude-mobile');
                if (desktop) desktop.style.display = isMobile ? 'none' : 'block';
                if (mobile) mobile.style.display = isMobile ? 'block' : 'none';
            }
        }
        
        function updateStats() {
            const contacts = storage.get('contacts');
            const kanbanState = storage.getObj('kanbanState');
            const doneCount = Object.values(kanbanState).filter(s => s === 'done').length;
            const totalTasks = getTodayTasks().length;
            
            document.getElementById('stat-contacts').textContent = contacts.length;
            document.getElementById('stat-tasks').textContent = doneCount + '/' + totalTasks;
        }
        
        function getTodayTasks() {
            const now = new Date();
            const dateStr = now.toISOString().split('T')[0];
            const day = now.getDay();
            const hour = now.getHours();
            
            // DATE-SPECIFIC TASKS
            const dateSpecific = {
                '2025-12-16': [
                    // Monday Dec 16 - DETAILED TASKS
                    { id: 'mon_1', text: 'Morning workout (YOU SKIPPED THIS YESTERDAY!)', time: '06:30', targetEnd: '07:30', priority: 'high', category: 'self' },
                    { id: 'mon_2', text: 'Review Jobscan results for JPMorgan/Amazon/ServiceNow', time: '08:00', targetEnd: '08:30', priority: 'high', category: 'work' },
                    { id: 'mon_3', text: 'Update resume based on Jobscan gaps', time: '08:30', targetEnd: '10:00', priority: 'high', category: 'work' },
                    { id: 'mon_4', text: 'Apply: JPMorgan Chase PM role (with optimized resume)', time: '10:00', targetEnd: '11:00', priority: 'high', category: 'work' },
                    { id: 'mon_5', text: 'Apply: Amazon PM role (tailor for tech)', time: '11:00', targetEnd: '12:00', priority: 'high', category: 'work' },
                    { id: 'mon_6', text: 'Lunch break & 20-min walk', time: '12:30', targetEnd: '13:00', priority: 'high', category: 'self' },
                    { id: 'mon_7', text: 'Find 3 referrals for JPMorgan role (State Street alumni)', time: '13:00', targetEnd: '14:00', priority: 'high', category: 'network' },
                    { id: 'mon_8', text: 'Send referral emails (use templates from Dec 12)', time: '14:00', targetEnd: '15:00', priority: 'high', category: 'network' },
                    { id: 'mon_9', text: 'SAFe prep - Module 1 Review (exam in 5 days!)', time: '15:00', targetEnd: '16:00', priority: 'high', category: 'cert' },
                    { id: 'mon_10', text: 'State Street case study - Problem statement draft', time: '16:00', targetEnd: '17:00', priority: 'high', category: 'work' },
                    { id: 'mon_11', text: 'Update Command Center + log Daily Win', time: '17:00', targetEnd: '17:15', priority: 'med', category: 'work' },
                    { id: 'mon_12', text: 'Hard stop - evening routine', time: '18:00', targetEnd: '19:00', priority: 'high', category: 'self' },
                    { id: 'mon_13', text: 'Dinner & gaming', time: '19:00', targetEnd: '21:00', priority: 'med', category: 'self' }
                ],
                
                '2025-12-17': [
                    // Tuesday Dec 17 - DETAILED TASKS
                    { id: 'tue_1', text: 'Morning workout (BUILD THE HABIT!)', time: '06:30', targetEnd: '07:30', priority: 'high', category: 'self' },
                    { id: 'tue_2', text: 'Apply: ServiceNow Engagement Mgr ($102K-$169K!)', time: '08:30', targetEnd: '09:30', priority: 'high', category: 'work' },
                    { id: 'tue_3', text: 'Research + Apply: 2 more FinServ roles', time: '09:30', targetEnd: '11:00', priority: 'high', category: 'work' },
                    { id: 'tue_4', text: 'Research + Apply: 2 SaaS/Tech PM roles', time: '11:00', targetEnd: '12:30', priority: 'high', category: 'work' },
                    { id: 'tue_5', text: 'Lunch & walk', time: '12:30', targetEnd: '13:00', priority: 'high', category: 'self' },
                    { id: 'tue_6', text: 'Follow up on Friday\\'s applications (5 emails)', time: '13:00', targetEnd: '13:45', priority: 'high', category: 'network' },
                    { id: 'tue_7', text: 'Reach out to 5 Northeastern alumni at target companies', time: '13:45', targetEnd: '14:45', priority: 'high', category: 'network' },
                    { id: 'tue_8', text: 'SAFe prep - Module 2 (exam in 4 days!)', time: '14:45', targetEnd: '16:00', priority: 'high', category: 'cert' },
                    { id: 'tue_9', text: 'Case study - Solution approach & metrics draft', time: '16:00', targetEnd: '17:00', priority: 'high', category: 'work' },
                    { id: 'tue_10', text: 'Update trackers + log Daily Win', time: '17:00', targetEnd: '17:15', priority: 'med', category: 'work' },
                    { id: 'tue_11', text: 'Hard stop', time: '18:00', targetEnd: '19:00', priority: 'high', category: 'self' }
                ],
                
                '2025-12-18': [
                    // Wednesday Dec 18 - DETAILED TASKS  
                    { id: 'wed_1', text: 'Morning workout (3-day streak attempt!)', time: '06:30', targetEnd: '07:30', priority: 'high', category: 'self' },
                    { id: 'wed_2', text: 'Apply: 3 new researched roles', time: '08:30', targetEnd: '10:30', priority: 'high', category: 'work' },
                    { id: 'wed_3', text: 'Follow up on Mon/Tue applications', time: '10:30', targetEnd: '11:15', priority: 'high', category: 'network' },
                    { id: 'wed_4', text: 'Connect with hiring managers on LinkedIn (5 roles)', time: '11:15', targetEnd: '12:00', priority: 'high', category: 'network' },
                    { id: 'wed_5', text: 'Lunch & walk', time: '12:30', targetEnd: '13:00', priority: 'high', category: 'self' },
                    { id: 'wed_6', text: 'SAFe prep - Module 3 + practice test (exam in 3 days!)', time: '13:00', targetEnd: '14:30', priority: 'high', category: 'cert' },
                    { id: 'wed_7', text: 'SAFe registration confirmation', time: '14:30', targetEnd: '14:45', priority: 'high', category: 'cert' },
                    { id: 'wed_8', text: 'Case study - Results & impact section', time: '15:00', targetEnd: '16:30', priority: 'high', category: 'work' },
                    { id: 'wed_9', text: 'Update all trackers + log Daily Win', time: '16:30', targetEnd: '16:45', priority: 'med', category: 'work' },
                    { id: 'wed_10', text: 'Hard stop', time: '18:00', targetEnd: '19:00', priority: 'high', category: 'self' }
                ],
                
                '2025-12-13': [
                    { id: 'fri_1', text: 'Morning workout', time: '06:30', targetEnd: '07:30', priority: 'high', category: 'self' },
                    { id: 'fri_2', text: 'Apply to 5 positions', time: '08:30', targetEnd: '10:30', priority: 'high', category: 'work' },
                    { id: 'fri_3', text: 'SAFe prep - Module 1', time: '10:30', targetEnd: '11:30', priority: 'high', category: 'cert' },
                    { id: 'fri_4', text: 'Alumni mapping', time: '12:00', targetEnd: '13:00', priority: 'high', category: 'network' },
                    { id: 'fri_5', text: 'Send 7 emails', time: '13:45', targetEnd: '14:45', priority: 'high', category: 'network' },
                    { id: 'fri_6', text: 'Case study outline', time: '14:45', targetEnd: '15:45', priority: 'high', category: 'work' },
                    { id: 'fri_7', text: 'PMP study', time: '15:45', targetEnd: '16:45', priority: 'med', category: 'cert' }
                ],
                '2025-12-19': [
                    { id: 'safe1', text: 'SAFe Course Day 1', time: '08:00', targetEnd: '17:00', priority: 'high', category: 'cert' },
                    { id: 'safe2', text: 'Light apps (2)', time: '17:30', targetEnd: '18:15', priority: 'med', category: 'work' },
                    { id: 'safe3', text: 'Evening gym', time: '18:30', targetEnd: '19:30', priority: 'high', category: 'self' }
                ],
                '2025-12-20': [
                    { id: 'safe4', text: 'SAFe Course Day 2', time: '08:00', targetEnd: '17:00', priority: 'high', category: 'cert' },
                    { id: 'safe5', text: 'Light apps (2)', time: '17:30', targetEnd: '18:15', priority: 'med', category: 'work' },
                    { id: 'safe6', text: 'Exam prep', time: '19:00', targetEnd: '21:00', priority: 'high', category: 'cert' }
                ],
                '2025-12-21': [
                    { id: 'exam1', text: 'SAFe EXAM', time: '09:00', targetEnd: '11:00', priority: 'high', category: 'cert' },
                    { id: 'exam2', text: 'Update resume + SAFe', time: '14:00', targetEnd: '15:00', priority: 'high', category: 'work' },
                    { id: 'exam3', text: 'CELEBRATION!', time: '18:00', targetEnd: '21:00', priority: 'high', category: 'self' }
                ]
            };
            
            if (dateSpecific[dateStr]) return dateSpecific[dateStr];
            
            // Weekend default
            if (day === 0 || day === 6) {
                return [
                    { id: 'w1', text: 'Workout', time: '08:00', targetEnd: '09:00', priority: 'high', category: 'self' },
                    { id: 'w2', text: 'Apply to 3 roles', time: '10:00', targetEnd: '12:00', priority: 'med', category: 'work' },
                    { id: 'w3', text: 'PMP study', time: '14:00', targetEnd: '15:00', priority: 'med', category: 'cert' },
                    { id: 'w4', text: 'Gaming', time: '19:00', targetEnd: '21:00', priority: 'med', category: 'self' }
                ];
            }
            
            // Weekday default
            return [
                { id: 't1', text: 'Morning workout', time: '06:30', targetEnd: '07:30', priority: 'high', category: 'self' },
                { id: 't2', text: 'Apply to 5 positions', time: '08:30', targetEnd: '10:30', priority: 'high', category: 'work' },
                { id: 't3', text: 'Send 5-7 emails', time: '11:00', targetEnd: '12:00', priority: 'high', category: 'network' },
                { id: 't4', text: 'PMP study', time: '14:30', targetEnd: '15:30', priority: 'med', category: 'cert' },
                { id: 't5', text: 'Hard stop', time: '18:00', targetEnd: '19:00', priority: 'high', category: 'self' }
            ];
        }
        
        
        function initKanban() {
            const tasks = getTodayTasks();
            const today = new Date().toISOString().split('T')[0];
            let kanbanState = storage.getObj('kanbanState');
            const lastDate = localStorage.getItem('kanbanDate');
            
            if (lastDate !== today) {
                kanbanState = {};
                tasks.forEach(task => kanbanState[task.id] = 'todo');
                storage.setObj('kanbanState', kanbanState);
                localStorage.setItem('kanbanDate', today);
            }
            
            renderKanban();
            renderMobileKanban();
        }
        
        function renderKanban() {
            const tasks = getTodayTasks();
            const kanbanState = storage.getObj('kanbanState');
            
            ['todo', 'progress', 'done'].forEach(column => {
                const container = document.getElementById(column + '-column');
                const columnTasks = tasks.filter(task => kanbanState[task.id] === column);
                
                container.innerHTML = columnTasks.map(task => `
                    <div class="kanban-card ${task.priority}-priority" 
                         draggable="true" 
                         ondragstart="drag(event, '${task.id}')"
                         id="card-${task.id}">
                        <div class="card-title">${task.text}</div>
                        <div class="card-meta">
                            <span class="card-tag tag-${task.category}">${task.category}</span>
                            <span class="card-tag tag-network">${task.time}</span>
                        </div>
                    </div>
                `).join('');
            });
            
            updateStats();
        }
        
        function allowDrop(ev) { ev.preventDefault(); }
        
        let draggedTaskId = null;
        function drag(ev, taskId) {
            draggedTaskId = taskId;
        }
        
        function drop(ev, newColumn) {
            ev.preventDefault();
            if (!draggedTaskId) return;
            
            const kanbanState = storage.getObj('kanbanState');
            const taskHistory = storage.getObj('taskHistory') || {};
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            
            // Get task details
            const tasks = getTodayTasks();
            const task = tasks.find(t => t.id === draggedTaskId);
            
            const oldColumn = kanbanState[draggedTaskId];
            kanbanState[draggedTaskId] = newColumn;
            
            // Track in history
            if (!taskHistory[draggedTaskId]) {
                taskHistory[draggedTaskId] = {
                    taskId: draggedTaskId,
                    text: task ? task.text : draggedTaskId,
                    category: task ? task.category : 'unknown',
                    dates: [],
                    completions: [],
                    skips: [],
                    lateCompletions: []
                };
            }
            
            // Record date if not already recorded
            if (!taskHistory[draggedTaskId].dates.includes(today)) {
                taskHistory[draggedTaskId].dates.push(today);
            }
            
            // Track completion
            if (newColumn === 'done' && oldColumn !== 'done') {
                const completedAt = now.toISOString();
                taskHistory[draggedTaskId].completions.push({
                    date: today,
                    time: completedAt
                });
                
                // Check if late
                if (task && task.targetEnd) {
                    const [targetHour, targetMin] = task.targetEnd.split(':');
                    const targetTime = new Date();
                    targetTime.setHours(parseInt(targetHour), parseInt(targetMin), 0);
                    
                    if (now > targetTime) {
                        taskHistory[draggedTaskId].lateCompletions.push(completedAt);
                    }
                }
            }
            
            storage.setObj('kanbanState', kanbanState);
            storage.setObj('taskHistory', taskHistory);
            
            draggedTaskId = null;
            renderKanban();
            renderMobileKanban();
            if (typeof renderCoachDashboard === 'function') renderCoachDashboard();
        }
        
        
        
        // MOBILE KANBAN
        let currentMobileColumn = 'todo';
        
        function switchMobileColumn(col) {
            currentMobileColumn = col;
            
            // Update tab styles
            ['todo', 'progress', 'done'].forEach(c => {
                const tab = document.getElementById('mobile-tab-' + c);
                if (tab) {
                    tab.classList.remove('active');
                    tab.classList.remove('todo', 'progress', 'done');
                }
            });
            
            const activeTab = document.getElementById('mobile-tab-' + col);
            if (activeTab) {
                activeTab.classList.add('active', col);
            }
            
            renderMobileKanban();
        }
        
        function renderMobileKanban() {
            const tasks = getTodayTasks();
            const kState = storage.getObj('kanbanState');
            const container = document.getElementById('mobile-cards');
            if (!container) return;
            
            const colTasks = tasks.filter(t => kState[t.id] === currentMobileColumn);
            
            if (colTasks.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 50px 24px; background: rgba(20, 30, 50, 0.25); backdrop-filter: blur(60px); border-radius: 13px; border: 1px solid rgba(139, 92, 246, 0.2);">
                        <div style="font-size: 3em; margin-bottom: 16px; opacity: 0.3;"><i class="fa-solid fa-check-double"></i></div>
                        <div style="font-size: 0.95em; color: rgba(255, 255, 255, 0.6);">All done in this column!</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = colTasks.map(t => `
                <div class="mobile-kanban-card ${t.priority}-priority" id="mobile-card-${t.id}">
                    <div class="mobile-card-title">${t.text}</div>
                    <div class="card-meta">
                        <span class="card-tag tag-${t.category}">${t.category}</span>
                        <span class="card-tag tag-network">${t.time}</span>
                    </div>
                    <div class="mobile-action-buttons">
                        ${currentMobileColumn !== 'todo' ? `
                            <button class="mobile-action-btn todo-btn" onclick="moveTaskMobile('${t.id}', 'todo')">
                                <i class="fa-solid fa-arrow-left"></i> To Do
                            </button>
                        ` : ''}
                        ${currentMobileColumn !== 'progress' ? `
                            <button class="mobile-action-btn progress-btn" onclick="moveTaskMobile('${t.id}', 'progress')">
                                <i class="fa-solid fa-bolt"></i> Progress
                            </button>
                        ` : ''}
                        ${currentMobileColumn !== 'done' ? `
                            <button class="mobile-action-btn done-btn" onclick="moveTaskMobile('${t.id}', 'done')">
                                <i class="fa-solid fa-check"></i> Done
                            </button>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }
        
        function moveTaskMobile(taskId, newCol) {
            const kState = storage.getObj('kanbanState');
            const taskHistory = storage.getObj('taskHistory') || {};
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            
            // Get task details
            const tasks = getTodayTasks();
            const task = tasks.find(t => t.id === taskId);
            
            const oldCol = kState[taskId];
            kState[taskId] = newCol;
            
            // Initialize history if needed
            if (!taskHistory[taskId]) {
                taskHistory[taskId] = {
                    taskId: taskId,
                    text: task ? task.text : taskId,
                    category: task ? task.category : 'unknown',
                    dates: [],
                    completions: [],
                    skips: [],
                    lateCompletions: []
                };
            }
            
            // Record date
            if (!taskHistory[taskId].dates.includes(today)) {
                taskHistory[taskId].dates.push(today);
            }
            
            // Track completion
            if (newCol === 'done' && oldCol !== 'done') {
                const completedAt = now.toISOString();
                taskHistory[taskId].completions.push({
                    date: today,
                    time: completedAt
                });
                
                // Check if late
                if (task && task.targetEnd) {
                    const [targetHour, targetMin] = task.targetEnd.split(':');
                    const targetTime = new Date();
                    targetTime.setHours(parseInt(targetHour), parseInt(targetMin), 0);
                    
                    if (now > targetTime) {
                        taskHistory[taskId].lateCompletions.push(completedAt);
                    }
                }
            }
            
            storage.setObj('kanbanState', kState);
            storage.setObj('taskHistory', taskHistory);
            
            // Smooth transition
            const card = document.getElementById('mobile-card-' + taskId);
            if (card) {
                card.style.opacity = '0';
                card.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    renderMobileKanban();
                    renderKanban();
                    updateStats();
                    if (typeof renderCoachDashboard === 'function') renderCoachDashboard();
                }, 200);
            } else {
                renderMobileKanban();
                renderKanban();
                updateStats();
                if (typeof renderCoachDashboard === 'function') renderCoachDashboard();
            }
        }
        
        function resetWithJustification() {
            const reason = prompt('âš ï¸ HARD MODE RESET\n\nResetting abandons your accountability.\nSkipped tasks won\'t disappear - they\'ll haunt you.\n\nWhy are you resetting?\n(Be honest with yourself)');
            
            if (!reason || reason.trim() === '') {
                alert('Reset cancelled. Face your skipped tasks.');
                return;
            }
            
            // Track reset
            const resets = storage.get('resetHistory') || [];
            resets.push({
                date: new Date().toISOString(),
                reason: reason,
                tasksAbandoned: Object.values(storage.getObj('kanbanState')).filter(s => s === 'todo').length
            });
            storage.set('resetHistory', resets);
            
            // Actually reset
            const kState = {};
            getTodayTasks().forEach(t => kState[t.id] = 'todo');
            storage.setObj('kanbanState', kState);
            
            alert(`Reset complete.\n\nThis is reset #${resets.length} this campaign.\n\nYour reason: "${reason}"\n\nDo better.`);
            
            renderKanban();
            renderMobileKanban();
            renderCoachDashboard();
        }
        
        
        function showSchedule(type) {
            const container = document.getElementById('schedule-content');
            
            if (type === 'weekday') {
                container.innerHTML = `
                    <table class="schedule-container" style="width: 100%;">
                        <tr><td class="time-label">06:30</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-dumbbell"></i> Morning Workout</div><div class="activity-desc">Gym session (45-60 min)</div></td></tr>
                        <tr><td class="time-label">08:00</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-list-check"></i> Planning</div><div class="activity-desc">Review board, set priorities</div></td></tr>
                        <tr><td class="time-label">08:30</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-paper-plane"></i> Applications</div><div class="activity-desc">Research â†’ Tailor â†’ Submit (5 roles)</div></td></tr>
                        <tr><td class="time-label">10:30</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-mug-hot"></i> Coffee Break</div><div class="activity-desc">15-20 min walk</div></td></tr>
                        <tr><td class="time-label">11:00</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-envelope"></i> Networking</div><div class="activity-desc">Personalized emails (5-7 contacts)</div></td></tr>
                        <tr><td class="time-label">12:30</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-utensils"></i> Lunch</div><div class="activity-desc">Meal + 20-min outdoor walk</div></td></tr>
                        <tr><td class="time-label">13:30</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-reply"></i> Follow-Ups</div><div class="activity-desc">Email responses, tracking</div></td></tr>
                        <tr><td class="time-label">14:30</td><td class="activity learning"><div class="activity-title"><i class="fa-solid fa-book-open"></i> PMP Study</div><div class="activity-desc">1 hour focused prep</div></td></tr>
                        <tr><td class="time-label">15:30</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-magnifying-glass"></i> Research</div><div class="activity-desc">Tomorrow's targets</div></td></tr>
                        <tr><td class="time-label">16:30</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-inbox"></i> Admin</div><div class="activity-desc">Update trackers, messages</div></td></tr>
                        <tr><td class="time-label">18:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-door-open"></i> Hard Stop</div><div class="activity-desc">Drive or cafe - Disconnect</div></td></tr>
                        <tr><td class="time-label">19:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-gamepad"></i> Free Time</div><div class="activity-desc">Gaming, social, dinner</div></td></tr>
                        <tr><td class="time-label">23:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-bed"></i> Sleep</div><div class="activity-desc">8-hour cycle</div></td></tr>
                    </table>
                `;
            } else {
                container.innerHTML = `
                    <table class="schedule-container" style="width: 100%;">
                        <tr><td class="time-label">07:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-person-running"></i> Extended Workout</div><div class="activity-desc">90-minute session</div></td></tr>
                        <tr><td class="time-label">09:00</td><td class="activity break"><div class="activity-title"><i class="fa-solid fa-coffee"></i> Breakfast</div><div class="activity-desc">Leisurely meal</div></td></tr>
                        <tr><td class="time-label">10:00</td><td class="activity work"><div class="activity-title"><i class="fa-solid fa-laptop-code"></i> Light Work</div><div class="activity-desc">3 apps, 3 emails (2 hr max)</div></td></tr>
                        <tr><td class="time-label">12:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-map-location-dot"></i> Exploration</div><div class="activity-desc">Austin restaurant discovery</div></td></tr>
                        <tr><td class="time-label">13:00</td><td class="activity learning"><div class="activity-title"><i class="fa-solid fa-graduation-cap"></i> Study</div><div class="activity-desc">PMP prep (1-2 hours)</div></td></tr>
                        <tr><td class="time-label">15:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-mountain-sun"></i> Adventure</div><div class="activity-desc">Hill Country, Lake Travis</div></td></tr>
                        <tr><td class="time-label">18:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-gamepad"></i> Gaming</div><div class="activity-desc">Extended session (2-3 hours)</div></td></tr>
                        <tr><td class="time-label">21:00</td><td class="activity selfcare"><div class="activity-title"><i class="fa-solid fa-people-group"></i> Social</div><div class="activity-desc">Personal connections</div></td></tr>
                    </table>
                `;
            }
        }
        
        setTimeout(() => showSchedule('weekday'), 100);
        
        function addContact() {
            const name = document.getElementById('contact-name').value.trim();
            if (!name) {
                alert('Contact name required');
                return;
            }
            
            const contact = {
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                name,
                company: document.getElementById('contact-company').value,
                type: document.getElementById('contact-type').value,
                status: document.getElementById('contact-status').value,
                notes: document.getElementById('contact-notes').value
            };
            
            const contacts = storage.get('contacts');
            contacts.unshift(contact);
            storage.set('contacts', contacts);
            
            document.getElementById('contact-name').value = '';
            document.getElementById('contact-company').value = '';
            document.getElementById('contact-notes').value = '';
            
            renderContacts();
            updateStats();
        }
        
        function renderContacts() {
            const contacts = storage.get('contacts');
            const container = document.getElementById('contacts-list');
            
            if (contacts.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 60px; background: rgba(40, 48, 65, 0.5); backdrop-filter: blur(60px); border-radius: 12px; border: 1px solid rgba(100, 150, 255, 0.12); margin-top: 24px;">
                        <div style="font-size: 3em; margin-bottom: 16px; color: rgba(255, 255, 255, 0.2);"><i class="fa-solid fa-users-slash"></i></div>
                        <div style="font-size: 1em; color: rgba(255, 255, 255, 0.6);">No contacts yet</div>
                        <div style="margin-top: 8px; color: rgba(255, 255, 255, 0.4); font-size: 0.9em;">Add first contact above</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <h3 style="margin: 24px 0 16px 0; font-size: 1.1em; display: flex; align-items: center; gap: 10px;">
                    <i class="fa-solid fa-address-book"></i> Network Log (${contacts.length})
                </h3>
                <table class="data-table">
                    <thead>
                        <tr><th>Date</th><th>Name</th><th>Company</th><th>Type</th><th>Status</th><th>Action</th></tr>
                    </thead>
                    <tbody>
                        ${contacts.map(c => `
                            <tr>
                                <td>${c.date}</td>
                                <td><strong>${c.name}</strong></td>
                                <td>${c.company}</td>
                                <td>${c.type}</td>
                                <td>${c.status}</td>
                                <td><button class="btn btn-danger btn-sm" onclick="deleteContact(${c.id})"><i class="fa-solid fa-trash"></i> Delete</button></td>
                            </tr>
                            ${c.notes ? `<tr><td colspan="6" style="background: rgba(245, 158, 11, 0.08); backdrop-filter: blur(50px); padding: 12px; border-left: 3px solid rgba(245, 158, 11, 0.5);"><strong>Notes:</strong> ${c.notes}</td></tr>` : ''}
                        `).join('')}
                    </tbody>
                </table>
            `;
        }
        
        function deleteContact(id) {
            if (!confirm('Delete contact?')) return;
            let contacts = storage.get('contacts');
            contacts = contacts.filter(c => c.id !== id);
            storage.set('contacts', contacts);
            renderContacts();
            updateStats();
        }
        
        function excelDateToJSDate(serial) {
            if (!serial || serial === '') return null;
            if (typeof serial === 'string') {
                const date = new Date(serial);
                if (!isNaN(date.getTime())) return date;
            }
            if (typeof serial === 'number') {
                const utc_days = Math.floor(serial - 25569);
                const utc_value = utc_days * 86400;
                const date_info = new Date(utc_value * 1000);
                return new Date(date_info.getFullYear(), date_info.getMonth(), date_info.getDate());
            }
            if (serial instanceof Date) return serial;
            return null;
        }
        
        function formatDate(dateValue) {
            const date = excelDateToJSDate(dateValue);
            if (!date || isNaN(date.getTime())) return 'â€”';
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }
        
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                    const jsonData = XLSX.utils.sheet_to_json(firstSheet);
                    
                    appData = jsonData;
                    renderDashboard();
                    
                    document.getElementById('upload-area').classList.add('has-data');
                    document.getElementById('upload-text').textContent = 'Data Loaded Successfully';
                } catch (error) {
                    alert('Error processing file: ' + error.message);
                }
            };
            reader.readAsArrayBuffer(file);
        }
        
        function renderDashboard() {
            if (!appData || appData.length === 0) return;
            
            document.getElementById('dashboard-content').style.display = 'block';
            document.getElementById('data-summary').textContent = `${appData.length} applications`;
            document.getElementById('stat-apps').textContent = appData.length;
            
            const statuses = {};
            appData.forEach(app => {
                const status = app['Status'] || 'Applied';
                statuses[status] = (statuses[status] || 0) + 1;
            });
            
            const total = appData.length;
            const phoneScreens = statuses['Phone Screen'] || 0;
            const interviews = statuses['Interview'] || 0;
            const offers = statuses['Offer'] || 0;
            const actualResponses = phoneScreens + interviews + offers;
            const responseRate = total > 0 ? Math.round((actualResponses / total) * 100) : 0;
            const rejected = statuses['Rejected'] || 0;
            
            document.getElementById('stat-rate').textContent = responseRate + '%';
            document.getElementById('stat-interviews').textContent = interviews + offers;
            
            document.getElementById('status-chart').innerHTML = Object.entries(statuses)
                .sort((a, b) => b[1] - a[1])
                .map(([status, count]) => `
                    <div class="bar-item">
                        <div class="bar-label">${status}</div>
                        <div class="bar-fill">
                            <div class="bar-progress" style="width: ${(count/total)*100}%">
                                ${count} (${Math.round((count/total)*100)}%)
                            </div>
                        </div>
                    </div>
                `).join('');
            
            const weeks = {};
            appData.forEach(app => {
                const week = app['Week Number'] || 'Unknown';
                weeks[week] = (weeks[week] || 0) + 1;
            });
            
            document.getElementById('week-chart').innerHTML = Object.entries(weeks)
                .sort((a, b) => a[0] - b[0])
                .map(([week, count]) => `
                    <div class="bar-item">
                        <div class="bar-label">Week ${week}</div>
                        <div class="bar-fill">
                            <div class="bar-progress" style="width: ${(count/total)*100}%">${count}</div>
                        </div>
                    </div>
                `).join('');
            
            const companies = {};
            appData.forEach(app => {
                const company = app['Company name'] || 'Unknown';
                companies[company] = (companies[company] || 0) + 1;
            });
            
            document.getElementById('company-chart').innerHTML = Object.entries(companies)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10)
                .map(([company, count]) => `
                    <div class="bar-item">
                        <div class="bar-label">${company.substring(0, 28)}</div>
                        <div class="bar-fill">
                            <div class="bar-progress" style="width: ${(count/total)*100}%">${count}</div>
                        </div>
                    </div>
                `).join('');
            
            const sortedApps = appData
                .map(app => ({ ...app, parsedDate: excelDateToJSDate(app['Timestamp']) }))
                .filter(app => app.parsedDate)
                .sort((a, b) => b.parsedDate - a.parsedDate)
                .slice(0, 10);
            
            document.getElementById('recent-apps').innerHTML = `
                <table class="data-table">
                    <thead><tr><th>Date</th><th>Company</th><th>Role</th><th>Status</th></tr></thead>
                    <tbody>
                        ${sortedApps.map(app => `
                            <tr>
                                <td>${formatDate(app['Timestamp'])}</td>
                                <td><strong>${app['Company name']}</strong></td>
                                <td>${app['Role name']}</td>
                                <td>${app['Status'] || 'Applied'}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            const avgPerWeek = total / Object.keys(weeks).length;
            document.getElementById('insights-box').innerHTML = `
                <div style="font-size: 0.95em; line-height: 2;">
                    <div><strong>Total:</strong> ${total}</div>
                    <div><strong>Responses:</strong> ${actualResponses}</div>
                    <div><strong>Rate:</strong> ${responseRate}%</div>
                    <div><strong>Rejected:</strong> ${rejected} (${Math.round((rejected/total)*100)}%)</div>
                    <div><strong>Avg/Week:</strong> ${avgPerWeek.toFixed(1)}</div>
                </div>
            `;
            
            let actions = [];
            if (responseRate === 0 && total > 50) actions.push({ text: 'Critical: Zero response rate', color: '#fca5a5' });
            if (responseRate < 2 && total > 100) actions.push({ text: 'Warning: Sub-optimal performance', color: '#fcd34d' });
            if (avgPerWeek > 40) actions.push({ text: 'Warning: Volume over quality', color: '#fcd34d' });
            if (actions.length === 0 && responseRate > 5) actions.push({ text: 'Status: Strategy performing', color: '#86efac' });
            if (actions.length === 0) actions.push({ text: 'Status: Monitoring active', color: '#93c5fd' });
            
            document.getElementById('action-box').innerHTML = `
                <div style="font-size: 0.95em; line-height: 2;">
                    ${actions.map(a => `<div style="margin: 12px 0; color: ${a.color}; font-weight: 600;"><i class="fa-solid fa-circle-exclamation"></i> ${a.text}</div>`).join('')}
                </div>
            `;
        }
        
        function renderPlan() {
            document.getElementById('plan-grid').innerHTML = `
                <div class="week-grid">
                    <div class="week-card">
                        <div class="week-card-header"><i class="fa-solid fa-flag-checkered"></i> Week 1: Foundation (Dec 12-18)</div>
                        <div class="week-card-body">
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-calendar-day"></i> Thu 12/12</div>
                                <ul class="day-tasks">
                                    <li>Resume optimization + Jobscan validation</li>
                                    <li>Portfolio case study creation</li>
                                    <li>LinkedIn profile enhancement</li>
                                </ul>
                            </div>
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-calendar-week"></i> Fri-Wed</div>
                                <ul class="day-tasks">
                                    <li>Company research (50 targets)</li>
                                    <li>Alumni mapping (20 contacts)</li>
                                    <li>Email templates</li>
                                    <li>SAFe registration</li>
                                    <li>15 apps + 15 emails</li>
                                </ul>
                            </div>
                            <div style="margin-top: 16px; padding: 14px; background: rgba(34, 197, 94, 0.15); backdrop-filter: blur(50px); border-radius: 10px; text-align: center; font-weight: 600; color: #86efac; border: 1px solid rgba(34, 197, 94, 0.25);">
                                <i class="fa-solid fa-check-double"></i> Targets: 15 apps | 15 emails | Resume fixed | SAFe registered
                            </div>
                        </div>
                    </div>
                    
                    <div class="week-card">
                        <div class="week-card-header"><i class="fa-solid fa-certificate"></i> Week 2: Certification (Dec 19-25)</div>
                        <div class="week-card-body">
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-chalkboard-user"></i> Thu-Fri 12/19-20</div>
                                <ul class="day-tasks">
                                    <li>SAFe Agilist course (2 days)</li>
                                    <li>Comprehensive notes</li>
                                    <li>Exam preparation</li>
                                </ul>
                            </div>
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-trophy"></i> Sat 12/21</div>
                                <ul class="day-tasks">
                                    <li>SAFe exam + immediate updates</li>
                                    <li>Celebration protocol</li>
                                </ul>
                            </div>
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-candy-cane"></i> Wed 12/25</div>
                                <ul class="day-tasks">
                                    <li>Complete rest - Christmas</li>
                                </ul>
                            </div>
                            <div style="margin-top: 16px; padding: 14px; background: rgba(34, 197, 94, 0.15); backdrop-filter: blur(50px); border-radius: 10px; text-align: center; font-weight: 600; color: #86efac; border: 1px solid rgba(34, 197, 94, 0.25);">
                                <i class="fa-solid fa-medal"></i> Target: SAFe certified | 8 apps | Recovery
                            </div>
                        </div>
                    </div>
                    
                    <div class="week-card">
                        <div class="week-card-header"><i class="fa-solid fa-fire"></i> Week 4: Full Deploy (Jan 1-7)</div>
                        <div class="week-card-body">
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-bolt"></i> Thu-Fri 1/2-3</div>
                                <ul class="day-tasks">
                                    <li>10 apps/day + 10 emails/day</li>
                                    <li>Maximum intensity execution</li>
                                </ul>
                            </div>
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-code"></i> Weekend</div>
                                <ul class="day-tasks">
                                    <li>SQL portfolio project</li>
                                    <li>Python automation project</li>
                                    <li>GitHub deployment</li>
                                </ul>
                            </div>
                            <div style="margin-top: 16px; padding: 14px; background: rgba(34, 197, 94, 0.15); backdrop-filter: blur(50px); border-radius: 10px; text-align: center; font-weight: 600; color: #86efac; border: 1px solid rgba(34, 197, 94, 0.25);">
                                <i class="fa-solid fa-rocket"></i> Targets: 40 apps | 20 emails | 2 projects | First callbacks
                            </div>
                        </div>
                    </div>
                    
                    <div class="week-card">
                        <div class="week-card-header"><i class="fa-solid fa-crown"></i> Weeks 5-9: Close Deal (Jan 8 - Feb 9)</div>
                        <div class="week-card-body">
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-repeat"></i> Daily Protocol</div>
                                <ul class="day-tasks">
                                    <li>5-10 quality applications</li>
                                    <li>5-10 networking emails</li>
                                    <li>PMP study: 1 hour</li>
                                    <li>Self-care: 3 hours</li>
                                </ul>
                            </div>
                            <div class="day-section">
                                <div class="day-header"><i class="fa-solid fa-star"></i> Milestones</div>
                                <ul class="day-tasks">
                                    <li>Weeks 5-6: Phone screens (2-4)</li>
                                    <li>Week 7: PMP certification</li>
                                    <li>Weeks 8-9: Final rounds</li>
                                    <li><strong>Mon 2/9: Offer acceptance!</strong></li>
                                </ul>
                            </div>
                            <div style="margin-top: 16px; padding: 14px; background: rgba(245, 158, 11, 0.15); backdrop-filter: blur(50px); border-radius: 10px; text-align: center; font-weight: 600; color: #fcd34d; border: 1px solid rgba(245, 158, 11, 0.25);">
                                <i class="fa-solid fa-exclamation-triangle"></i> High stress: Extra gym | Extra gaming | Social mandatory
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="success-box" style="margin-top: 32px;">
                    <h3 style="margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                        <i class="fa-solid fa-bullseye"></i> Overall Targets (9 Weeks)
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 24px;">
                        <div>
                            <strong style="display: block; margin-bottom: 8px;"><i class="fa-solid fa-briefcase"></i> Job Search:</strong>
                            <ul style="margin-left: 24px;">
                                <li>Applications: 100-120</li>
                                <li>Emails: 100-150</li>
                                <li>Phone screens: 4-8</li>
                                <li>Offers: 1-2</li>
                            </ul>
                        </div>
                        <div>
                            <strong style="display: block; margin-bottom: 8px;"><i class="fa-solid fa-certificate"></i> Certifications:</strong>
                            <ul style="margin-left: 24px;">
                                <li>SAFe (Week 2)</li>
                                <li>PMP (Week 7)</li>
                                <li>Portfolio: 2 projects</li>
                            </ul>
                        </div>
                        <div>
                            <strong style="display: block; margin-bottom: 8px;"><i class="fa-solid fa-heart-pulse"></i> Self-Care:</strong>
                            <ul style="margin-left: 24px;">
                                <li>Gym: 35+ sessions</li>
                                <li>Drives: 10+ scenic</li>
                                <li>Gaming: 50+ hours</li>
                                <li>Sleep: 8-hr avg</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="warning-box" style="margin-top: 24px;">
                    <strong><i class="fa-solid fa-scale-balanced"></i> Balance Requirements:</strong>
                    <ul style="margin-top: 12px; padding-left: 24px; line-height: 1.8;">
                        <li>18:00 hard stop (daily)</li>
                        <li>Gym: 4-5x weekly minimum</li>
                        <li>Sleep: 23:00-07:00 cycle</li>
                        <li>Sunday rest: 50% minimum</li>
                        <li>Gaming = Stress management</li>
                        <li>5+ rejections = Self-care trigger</li>
                        <li>Social: 1-2x weekly</li>
                    </ul>
                </div>
            `;
        }
    
        
        // DAILY WINS FUNCTIONS
        function saveWin() {
            const dateInput = document.getElementById('win-date');
            const appsInput = document.getElementById('win-apps');
            const responsesInput = document.getElementById('win-responses');
            const connectionsInput = document.getElementById('win-connections');
            const notesInput = document.getElementById('win-notes');
            
            const date = dateInput.value;
            if (!date) {
                alert('Please select a date');
                dateInput.focus();
                return;
            }
            
            const win = {
                id: Date.now(),
                date: date,
                apps: parseInt(appsInput.value) || 0,
                responses: parseInt(responsesInput.value) || 0,
                connections: parseInt(connectionsInput.value) || 0,
                notes: notesInput.value.trim()
            };
            
            const wins = storage.get('dailyWins');
            wins.unshift(win);
            storage.set('dailyWins', wins);
            
            // Clear form
            appsInput.value = '';
            responsesInput.value = '';
            connectionsInput.value = '';
            notesInput.value = '';
            
            renderWins();
            
            // Show feedback
            const btn = event.target;
            const origText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-check"></i> Saved!';
            btn.style.background = 'rgba(34, 197, 94, 0.5)';
            setTimeout(() => {
                btn.innerHTML = origText;
                btn.style.background = '';
            }, 2000);
        }
        
        function renderWins() {
            const wins = storage.get('dailyWins');
            document.getElementById('wins-count').textContent = wins.length;
            
            const container = document.getElementById('wins-list');
            if (wins.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 55px 24px; background: rgba(20, 30, 50, 0.28); backdrop-filter: blur(60px); border-radius: 13px; border: 1px solid rgba(139, 92, 246, 0.2); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);">
                        <div style="font-size: 3.5em; margin-bottom: 18px; opacity: 0.25;"><i class="fa-solid fa-trophy"></i></div>
                        <div style="font-size: 1.05em; color: rgba(255, 255, 255, 0.65); margin-bottom: 10px;">No wins logged yet</div>
                        <div style="font-size: 0.88em; color: rgba(255, 255, 255, 0.5);">Start tracking your daily progress above!</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = wins.map(w => `
                <div class="win-card">
                    <div class="win-date">
                        <i class="fa-solid fa-calendar-check"></i> 
                        ${new Date(w.date).toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}
                    </div>
                    <div class="win-metrics">
                        <div class="win-metric">
                            <div class="win-metric-value">${w.apps}</div>
                            <div class="win-metric-label">Apps</div>
                        </div>
                        <div class="win-metric">
                            <div class="win-metric-value">${w.responses}</div>
                            <div class="win-metric-label">Responses</div>
                        </div>
                        <div class="win-metric">
                            <div class="win-metric-value">${w.connections}</div>
                            <div class="win-metric-label">Connections</div>
                        </div>
                        <div class="win-metric" style="background: rgba(34, 197, 94, 0.18); border-color: rgba(34, 197, 94, 0.3);">
                            <div class="win-metric-value" style="background: linear-gradient(135deg, #86efac, #fbbf24); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                                ${w.apps + w.responses + w.connections}
                            </div>
                            <div class="win-metric-label">Total</div>
                        </div>
                    </div>
                    ${w.notes ? `<div class="win-notes"><i class="fa-solid fa-quote-left" style="opacity: 0.4; margin-right: 6px;"></i>${w.notes}</div>` : ''}
                    <div style="margin-top: 14px; text-align: right;">
                        <button class="btn btn-danger btn-sm" onclick="deleteWin(${w.id})">
                            <i class="fa-solid fa-trash-alt"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function deleteWin(id) {
            if (!confirm('Delete this win entry?')) return;
            let wins = storage.get('dailyWins');
            wins = wins.filter(w => w.id !== id);
            storage.set('dailyWins', wins);
            renderWins();
        }

        
        
        // =========================================
        // ACCOUNTABILITY COACH SYSTEM
        // =========================================
        
        // Calculate accountability metrics
        
        // Process past days to mark skipped tasks
        function processHistoricalSkips() {
            const taskHistory = storage.getObj('taskHistory') || {};
            const kState = storage.getObj('kanbanState');
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            
            // Get all tasks from past 7 days
            for (let i = 1; i <= 7; i++) {
                const pastDate = new Date(now.getTime() - (i * 24 * 60 * 60 * 1000));
                const pastDateStr = pastDate.toISOString().split('T')[0];
                
                // Get tasks for that date (need to simulate what tasks existed)
                // For now, check recurring tasks like "morning workout", "PMP study"
                const recurringTasks = {
                    'morning_workout': { text: 'Morning workout', category: 'self' },
                    'pmp_study': { text: 'PMP study', category: 'cert' },
                    'applications': { text: 'Applications', category: 'work' },
                    'networking': { text: 'Networking emails', category: 'network' }
                };
                
                // Check each recurring task
                Object.keys(recurringTasks).forEach(taskKey => {
                    const taskId = taskKey + '_' + pastDateStr;
                    
                    // If this task was never completed, mark as skipped
                    if (!taskHistory[taskId] || !taskHistory[taskId].completions || taskHistory[taskId].completions.length === 0) {
                        if (!taskHistory[taskId]) {
                            taskHistory[taskId] = {
                                taskId: taskId,
                                text: recurringTasks[taskKey].text,
                                category: recurringTasks[taskKey].category,
                                dates: [pastDateStr],
                                completions: [],
                                skips: [pastDateStr],
                                lateCompletions: []
                            };
                        } else if (!taskHistory[taskId].skips) {
                            taskHistory[taskId].skips = [pastDateStr];
                        } else if (!taskHistory[taskId].skips.includes(pastDateStr)) {
                            taskHistory[taskId].skips.push(pastDateStr);
                        }
                    }
                });
            }
            
            storage.setObj('taskHistory', taskHistory);
            return taskHistory;
        }
        
        function calculateAccountability() {
            // First process any historical skips
            processHistoricalSkips();
            
            const kState = storage.getObj('kanbanState');
            const taskHistory = storage.getObj('taskHistory') || {};
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            const startDate = new Date('2025-12-12');
            const daysSinceStart = Math.floor((now - startDate) / (24 * 60 * 60 * 1000));
            
            // Count ALL skips across ALL history (not just today!)
            let totalSkips = 0;
            let totalCompletions = 0;
            let totalLate = 0;
            let totalOnTime = 0;
            
            Object.keys(taskHistory).forEach(taskId => {
                const history = taskHistory[taskId];
                if (history.skips) {
                    totalSkips += history.skips.length;
                }
                if (history.completions) {
                    totalCompletions += history.completions.length;
                }
                if (history.lateCompletions) {
                    totalLate += history.lateCompletions.length;
                }
            });
            
            totalOnTime = totalCompletions - totalLate;
            
            // Today's tasks
            const todayTasks = getTodayTasks();
            let todayCompleted = 0;
            let todaySkipped = 0;
            let todayInProgress = 0;
            
            todayTasks.forEach(task => {
                const status = kState[task.id];
                if (status === 'done') {
                    todayCompleted++;
                } else if (status === 'progress') {
                    todayInProgress++;
                } else {
                    // Check if time has passed
                    if (task.time) {
                        const [hour, min] = task.time.split(':');
                        const taskTime = new Date();
                        taskTime.setHours(parseInt(hour), parseInt(min), 0);
                        if (now > taskTime) {
                            todaySkipped++;
                        }
                    }
                }
            });
            
            const todayTotal = todayTasks.length;
            const todayCompletionRate = todayTotal > 0 ? Math.round((todayCompleted / todayTotal) * 100) : 0;
            const overallOnTimeRate = totalCompletions > 0 ? Math.round((totalOnTime / totalCompletions) * 100) : 0;
            
            // Calculate streak
            const streakData = storage.getObj('streakData') || { current: 0, longest: 0 };
            
            return {
                // Campaign totals
                totalSkips: totalSkips,
                totalCompletions: totalCompletions,
                totalOnTime: totalOnTime,
                totalLate: totalLate,
                daysSinceStart: daysSinceStart,
                
                // Today
                todayTotal: todayTotal,
                todayCompleted: todayCompleted,
                todayInProgress: todayInProgress,
                todaySkipped: todaySkipped,
                todayCompletionRate: todayCompletionRate,
                
                // Rates
                overallOnTimeRate: overallOnTimeRate,
                currentStreak: streakData.current,
                longestStreak: streakData.longest
            };
        }
        
        // Detect behavior patterns
        function detectPatterns() {
            const taskHistory = storage.getObj('taskHistory') || {};
            const patterns = [];
            
            // Count skips by category
            const categorySkips = { self: 0, work: 0, cert: 0, network: 0 };
            const taskSkips = {};
            
            Object.keys(taskHistory).forEach(taskId => {
                const history = taskHistory[taskId];
                if (history.skips && history.skips.length > 0) {
                    taskSkips[history.text || taskId] = history.skips.length;
                    if (history.category) {
                        categorySkips[history.category] = (categorySkips[history.category] || 0) + history.skips.length;
                    }
                }
            });
            
            // Detect gym/workout pattern - SHOW EVEN 1 SKIP!
            const workoutSkips = Object.keys(taskSkips).filter(text => 
                text.toLowerCase().includes('workout') || text.toLowerCase().includes('gym')
            ).reduce((sum, text) => sum + taskSkips[text], 0);
            
            if (workoutSkips >= 1) {
                const severity = workoutSkips >= 3 ? 'critical' : 'warning';
                const message = workoutSkips === 1 
                    ? `Workout skipped 1x - Don't let this become a habit.`
                    : `Gym skipped ${workoutSkips}x - Physical health declining. This affects everything.`;
                patterns.push({
                    type: severity,
                    message: message,
                    icon: 'dumbbell',
                    action: 'Schedule gym for evening if mornings don\'t work'
                });
            }
            
            // Detect PMP/study avoidance - SHOW EVEN 1 SKIP!
            const studySkips = Object.keys(taskSkips).filter(text => 
                text.toLowerCase().includes('pmp') || text.toLowerCase().includes('study') || text.toLowerCase().includes('safe')
            ).reduce((sum, text) => sum + taskSkips[text], 0);
            
            if (studySkips >= 1) {
                const severity = studySkips >= 3 ? 'critical' : 'warning';
                const message = studySkips === 1
                    ? `Study skipped 1x - SAFe exam is Dec 21. Start preparing.`
                    : `Study avoided ${studySkips}x - You're not ready for SAFe exam. Study NOW.`;
                patterns.push({
                    type: severity,
                    message: message,
                    icon: 'graduation-cap',
                    action: 'Break into 20-min chunks. Just start.'
                });
            }
            
            // Detect case study avoidance
            const caseStudySkips = Object.keys(taskSkips).filter(text => 
                text.toLowerCase().includes('case study')
            ).reduce((sum, text) => sum + taskSkips[text], 0);
            
            if (caseStudySkips >= 2) {
                patterns.push({
                    type: 'warning',
                    message: `Case study avoided ${caseStudySkips}x - Portfolio incomplete without this.`,
                    icon: 'briefcase',
                    action: 'Start with just the outline. 30 minutes.'
                });
            }
            
            // Positive patterns
            const appStreak = Object.keys(taskHistory).filter(id => 
                taskHistory[id].text && taskHistory[id].text.toLowerCase().includes('apply') &&
                taskHistory[id].status === 'done'
            ).length;
            
            if (appStreak >= 4) {
                patterns.push({
                    type: 'success',
                    message: `Applications strong: ${appStreak} days! This is your main job. Keep it up.`,
                    icon: 'rocket',
                    action: 'Maintain this momentum!'
                });
            }
            
            return patterns;
        }
        
        // Generate coaching message based on data
        function getCoachingMessage() {
            const metrics = calculateAccountability();
            const patterns = detectPatterns();
            const hour = new Date().getHours();
            const streakData = storage.getObj('streakData') || { current: 0, longest: 0 };
            
            let message = '';
            
            // Time-based coaching with REAL data
            if (hour >= 6 && hour < 10) {
                // Morning
                if (metrics.totalSkips >= 5) {
                    message = `âš ï¸ You've skipped ${metrics.totalSkips} tasks total. That's ${metrics.totalSkips} times you chose easy over growth. Today is different. Prove it.`;
                } else if (streakData.current >= 3) {
                    message = `ðŸ”¥ ${streakData.current}-day streak! Keep going. First task: hardest one first.`;
                } else if (metrics.totalSkips > 0) {
                    message = `ðŸ’ª Morning. ${metrics.totalSkips} skips on record. Today: complete ${metrics.todayTotal} tasks to stay on track.`;
                } else {
                    message = `ðŸ’ª Good morning, Pranay. ${metrics.todayTotal} tasks today. Make them count.`;
                }
            } else if (hour >= 10 && hour < 14) {
                // Midday
                const expectedDone = Math.floor(metrics.todayTotal * 0.5);
                if (metrics.todayCompleted >= expectedDone) {
                    message = `âœ… ${metrics.todayCompleted}/${metrics.todayTotal} done. On pace. Keep executing.`;
                } else if (metrics.todayCompleted === 0) {
                    message = `ðŸš¨ NOTHING DONE YET. It's almost noon. Stop procrastinating. START NOW.`;
                } else {
                    message = `â° Only ${metrics.todayCompleted}/${metrics.todayTotal} done. Expected ${expectedDone} by now. Catch up this afternoon.`;
                }
            } else if (hour >= 18 && hour < 22) {
                // Evening review
                if (metrics.todayCompletionRate >= 90) {
                    message = `ðŸŒŸ ${metrics.todayCompletionRate}% today! Exceptional execution. You earned your evening.`;
                } else if (metrics.todayCompletionRate >= 75) {
                    message = `ðŸ‘ ${metrics.todayCompletionRate}% today. Solid, but you can do better. Tomorrow: 90%+.`;
                } else if (metrics.todayCompletionRate >= 50) {
                    message = `ðŸ“Š ${metrics.todayCompletionRate}% today. That's average. You're not average. Do better tomorrow.`;
                } else {
                    message = `ðŸ“‰ ${metrics.todayCompletionRate}% today. ${metrics.todaySkipped} tasks skipped. This is failing. What's blocking you? Fix it tomorrow.`;
                }
            } else {
                // Default/late night
                message = `ðŸ“Š Day ${metrics.daysSinceStart + 1} of campaign. ${metrics.totalSkips} total skips. ${metrics.totalCompletions} completions. ${metrics.overallOnTimeRate}% on-time rate.`;
            }
            
            // Add critical pattern alerts
            const criticalPattern = patterns.find(p => p.type === 'critical');
            if (criticalPattern) {
                message += `\n\nðŸš¨ ${criticalPattern.message}\nâ†’ ${criticalPattern.action}`;
            }
            
            const warningPattern = patterns.find(p => p.type === 'warning');
            if (warningPattern && !criticalPattern) {
                message += `\n\nâš ï¸ ${warningPattern.message}\nâ†’ ${warningPattern.action}`;
            }
            
            return message;
        }
            
            return message;
        }
        
        // Render coach dashboard
        function renderCoachDashboard() {
            const metrics = calculateAccountability();
            const patterns = detectPatterns();
            const streakData = storage.getObj('streakData') || { current: 0, longest: 0 };
            
            // Update metrics - SHOW CAMPAIGN TOTALS
            const el_weekcomp = document.getElementById('week-completion');
            const el_streak = document.getElementById('current-streak');
            const el_ontime = document.getElementById('ontime-rate');
            const el_skipped = document.getElementById('tasks-skipped');
            
            if (el_weekcomp) el_weekcomp.textContent = metrics.todayCompletionRate + '%';
            if (el_streak) el_streak.textContent = streakData.current + ' ðŸ”¥';
            if (el_ontime) el_ontime.textContent = metrics.overallOnTimeRate + '%';
            if (el_skipped) el_skipped.textContent = metrics.totalSkips; // TOTAL CAMPAIGN SKIPS!
            
            const el_ontime_detail = document.getElementById('completed-ontime');
            const el_late_detail = document.getElementById('completed-late');
            const el_progress = document.getElementById('in-progress');
            const el_skipped_detail = document.getElementById('skipped-total');
            
            if (el_ontime_detail) el_ontime_detail.textContent = metrics.totalOnTime;
            if (el_late_detail) el_late_detail.textContent = metrics.totalLate;
            if (el_progress) el_progress.textContent = metrics.todayInProgress;
            if (el_skipped_detail) el_skipped_detail.textContent = metrics.totalSkips;
            
            // Show coaching message with proper formatting
            const coachMessage = getCoachingMessage();
            const coachMsgEl = document.getElementById('coach-message');
            if (coachMsgEl) {
                // Replace \n with <br> for HTML display
                coachMsgEl.innerHTML = coachMessage.replace(/\n/g, '<br>');
            }
            
            // Show patterns
            const patternBox = document.getElementById('pattern-alerts');
            if (patterns.length > 0) {
                patternBox.innerHTML = patterns.map(p => {
                    const bgColor = p.type === 'critical' ? 'rgba(239, 68, 68, 0.2)' :
                                    p.type === 'warning' ? 'rgba(245, 158, 11, 0.2)' :
                                    'rgba(34, 197, 94, 0.2)';
                    const borderColor = p.type === 'critical' ? 'rgba(239, 68, 68, 0.4)' :
                                       p.type === 'warning' ? 'rgba(245, 158, 11, 0.4)' :
                                       'rgba(34, 197, 94, 0.4)';
                    
                    return `
                        <div style="background: ${bgColor}; border: 1px solid ${borderColor}; padding: 16px; border-radius: 10px; margin-bottom: 12px; backdrop-filter: blur(50px);">
                            <div style="display: flex; align-items: start; gap: 12px;">
                                <i class="fa-solid fa-${p.icon}" style="font-size: 1.8em; margin-top: 4px;"></i>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; margin-bottom: 6px;">${p.message}</div>
                                    ${p.action ? `<div style="font-size: 0.9em; color: rgba(255, 255, 255, 0.8); margin-top: 8px;">â†’ ${p.action}</div>` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                patternBox.innerHTML = `
                    <div style="text-align: center; padding: 30px; background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px;">
                        <div style="font-size: 2.5em; margin-bottom: 12px;"><i class="fa-solid fa-check-circle" style="color: #86efac;"></i></div>
                        <div style="color: rgba(255, 255, 255, 0.8);">No negative patterns detected. Keep executing!</div>
                    </div>
                `;
            }
            
            // Most skipped tasks
            const taskHistory = storage.getObj('taskHistory') || {};
            const skipList = Object.keys(taskHistory)
                .filter(id => taskHistory[id].skips && taskHistory[id].skips.length > 0)
                .sort((a, b) => (taskHistory[b].skips?.length || 0) - (taskHistory[a].skips?.length || 0))
                .slice(0, 5);
            
            const skipBox = document.getElementById('most-skipped-list');
            if (skipList.length > 0) {
                skipBox.innerHTML = skipList.map(id => {
                    const history = taskHistory[id];
                    return `
                        <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span>${history.text || id}</span>
                            <span style="color: #fca5a5; font-weight: 700;">${history.skips.length}x skipped</span>
                        </div>
                    `;
                }).join('');
            } else {
                skipBox.innerHTML = `<div style="text-align: center; padding: 20px; color: rgba(255, 255, 255, 0.6);">No skipped tasks yet. Good start!</div>`;
            }
        }
        
        // Track task completion with timestamp
        function completeTask(taskId) {
            const kState = storage.getObj('kanbanState');
            const taskHistory = storage.getObj('taskHistory') || {};
            
            // Mark as done
            kState[taskId] = 'done';
            
            // Record completion timestamp
            if (!taskHistory[taskId]) taskHistory[taskId] = {};
            taskHistory[taskId].completedAt = new Date().toISOString();
            taskHistory[taskId].status = 'done';
            taskHistory[taskId].date = new Date().toISOString().split('T')[0];
            
            storage.setObj('kanbanState', kState);
            storage.setObj('taskHistory', taskHistory);
            
            // Update streak
            updateStreak();
            
            // Refresh displays
            renderKanban();
            renderMobileKanban();
            renderCoachDashboard();
        }
        
        // Update streak data
        function updateStreak() {
            const metrics = calculateAccountability();
            const streakData = storage.getObj('streakData') || { current: 0, longest: 0, lastDate: null };
            const today = new Date().toISOString().split('T')[0];
            
            // Check if completed enough tasks today (>= 80%)
            if (metrics.completionRate >= 80) {
                if (streakData.lastDate === today) {
                    // Already counted today
                    return;
                }
                
                // Check if yesterday was also good
                const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
                if (streakData.lastDate === yesterday) {
                    streakData.current++;
                } else {
                    streakData.current = 1; // Start new streak
                }
                
                streakData.lastDate = today;
                
                // Update longest
                if (streakData.current > streakData.longest) {
                    streakData.longest = streakData.current;
                }
                
                storage.setObj('streakData', streakData);
            }
        }

        </script>
</body>
</html>
